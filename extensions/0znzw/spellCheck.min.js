/**!
 * Spellcheck
 * @author 0znzw <meow@miyo.icu> (@link https://scratch.mit.edu/users/0znzw/)
 * @version 1.1
 * @license MIT AND LGPL-3.0
 * Do not remove this comment
 */
!function(e){"use strict";const t=function(){var e={},t=e.spell,o=function(e){var t=e&&"function"==typeof e.get?e.get():{},o=function(){},r="abcdefghijklmnopqrstuvwxyz".split("");function s(o){e&&"function"==typeof e.store&&e.store(t,o)}function n(e,t){var o,s,n=[],c=t||r;for(o=0;o<e.length;o++)n.push(e.slice(0,o)+e.slice(o+1));for(o=0;o<e.length-1;o++)n.push(e.slice(0,o)+e.slice(o+1,o+2)+e.slice(o,o+1)+e.slice(o+2));for(o=0;o<e.length;o++)for(s in c)n.push(e.slice(0,o)+c[s]+e.slice(o+1));for(o=0;o<=e.length;o++)for(s in c)n.push(e.slice(0,o)+c[s]+e.slice(o));return n}function c(e){for(var t in e)if(e.hasOwnProperty(t))return!1;return!0}function p(e,t,o){var r,s,n,c=[];for(s=o;s>=t;s--)if(e.hasOwnProperty(s))for(n in r=e[s])r.hasOwnProperty(n)&&c.push({word:n,score:s});return c}function u(e,r){if("object"==typeof e&&(r=e),"string"==typeof e&&("object"==typeof r?r.corpus=e:r={corpus:e}),"string"==typeof r&&(r={corpus:r}),(r="object"==typeof r?r:{}).reset=!1!==r.reset,r.store=!1!==r.store,r.after_store=r.after_store||o,r.corpus=r.corpus||"",r.reset&&(t={}),"object"==typeof r.corpus)for(var n in r.corpus)a(n,{score:r.corpus[n]});else!function(e,t){var o;for(t=t||/[a-z]+/g,e=e.toLowerCase();o=t.exec(e);)a(o[0],1)}(r.corpus);r.store&&s(r.after_store)}function a(e,r){"string"!=typeof r&&"number"!=typeof r||(r={score:parseInt(r,10)}),(r="object"==typeof r?r:{}).score=r.score||1,r.store=r.store||!0,r.done=r.done||o,e=e.toLowerCase(),t[e]=t.hasOwnProperty(e)?t[e]+r.score:r.score,r.store&&s(r.done)}function i(e,r){(r="object"==typeof r?r:{}).store=!1!==r.store,r.done=r.done||o,t.hasOwnProperty(e)&&delete t[e],r.store&&s(r.done)}function f(e,o){if(t.hasOwnProperty(e))return[{word:e,score:t[e]}];var r,s,u,a=n(e,o),i={};function f(e){t.hasOwnProperty(e)&&(u=t[e],i.hasOwnProperty(u)||(i[u]={}),i[u][e]=!0,s=s?s<u?u:s:u,r=r?r>u?u:r:u)}return a.forEach(f),c(i)?(a.forEach(function(e){n(e,o).forEach(f)}),c(i)?[]:p(i,r,s)):p(i,r,s)}function l(e){return{corpus:t}}return{reset:function(){return u({reset:!0})},load:u,export:l,save:l,add_word:a,addWord:a,remove_word:i,removeWord:i,suggest:f,lucky:function(e,t){var o=f(e,t)[0];if(o&&o.hasOwnProperty("word"))return o.word}}};if(o._previous=t,"undefined"!=typeof exports)o.platform={name:"node.js",version:process.version},o.version=JSON.parse(require("fs").readFileSync(__dirname+"/package.json")).version,o.path=__dirname,"undefined"!=typeof module&&module.exports&&(exports=module.exports=o),exports.spell=o;else{if(o.platform={name:"browser"},o.version="0.0.3","function"!=typeof define||!define.amd)return e.spell=o,e;define("spell",function(){return o})}}().spell(),{BlockType:o,ArgumentType:r,Cast:s}=e,n="0znzwSpellcheck";const c=new class{static exports={spell:t};getInfo(){return{id:n,name:"Spellcheck",blocks:[{opcode:"reset",blockType:o.COMMAND,text:"reset dictionary"},{opcode:"export",blockType:o.REPORTER,text:"export dictionary"},{opcode:"load",blockType:o.COMMAND,text:"load text/dictionary [text] reset: [reset]",arguments:{text:{type:r.STRING,defaultValue:"foo bar"},reset:{type:r.BOOLEAN}}},{opcode:"add",blockType:o.COMMAND,text:"add word [text] score: [score]",arguments:{text:{type:r.STRING,defaultValue:"foo"},score:{type:r.NUMBER,defaultValue:1}}},{opcode:"remove",blockType:o.COMMAND,text:"remove word [text]",arguments:{text:{type:r.STRING,defaultValue:"foo"}}},{opcode:"suggest",blockType:o.REPORTER,text:"suggestions for [text] with alphabet [alph]",arguments:{text:{type:r.STRING,defaultValue:"bam"},alph:{type:r.STRING,defaultValue:"abcdefghijklmnopqrstuvwxyz"}}},{opcode:"lucky",blockType:o.REPORTER,text:"lucky [text]",arguments:{text:{type:r.STRING,defaultValue:"bam"}}}]}}reset(){t.reset()}export(){return JSON.stringify(t.export())}load({text:e,reset:o}){e=s.toString(e),o=s.toBoolean(o);try{t.load(JSON.parse(e),{reset:o})}catch{try{t.load(e,{reset:o})}catch{t.load("",{reset:o})}}}remove({text:e}){t.remove_word(s.toString(e))}add({text:e,score:o}){t.add_word(s.toString(e),{score:s.toNumber(o)})}lucky({text:e}){return t.lucky(s.toString(e))}suggest({text:e,alph:o}){return JSON.stringify(t.suggest(s.toString(e),s.toString(o).split("")))}};e.extensions.unsandboxed&&(e.vm.runtime[`cext_${n}`]=c),e.extensions.register(c)}(Scratch);