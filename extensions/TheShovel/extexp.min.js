/**!
 * Extension Exposer
 * @author TheShovel (@link https://github.com/TheShovel/)
 * @author 0znzw <meow@miyo.icu> (@link https://scratch.mit.edu/users/0znzw/)
 * @author Faunksys https://github.com/faunks/
 * @version 1.5
 * @copyright MIT (with credit) License
 * @comment Thanks to TheShovel for the original code, I just updated some internals :3
 * Do not remove this comment
 */
!function(e){if(!e.extensions.unsandboxed)throw new Error('"Extension Exposer" must be ran unsandboxed.');const{Cast:t,BlockType:n,ArgumentType:r,vm:o}=e,{runtime:s}=o,u="jodieextexp",c="run function [FUNCNAME] from [EXTLIST] with inputs [INPUT]",a={FUNCNAME:{type:r.STRING,defaultValue:"test"},EXTLIST:{type:r.STRING,menu:"EXTLIST",defaultValue:u},INPUT:{type:r.STRING,defaultValue:'{"INPUT":"Hello World!"}'}};e.extensions.register(s[`ext_${u}`]=new class{getInfo(){return{id:u,name:"Extension Exposer",blocks:[{func:"run",opcode:"runcommand",blockType:n.COMMAND,text:c,arguments:a},{func:"run",opcode:"runreporter",blockType:n.REPORTER,text:c,arguments:a,allowDropAnywhere:!0},{func:"run",opcode:"runboolean",blockType:n.BOOLEAN,text:c,arguments:a,allowDropAnywhere:!0},{func:"getBlocks",opcode:"getfunctions",blockType:n.REPORTER,text:"get blocks from [EXTLIST]",arguments:a}],menus:{EXTLIST:{acceptReporters:!0,acceptText:!0,items:"_extensions"}}}}_parseJSON(e){if(Array.isArray(e))return{};if("object"==typeof e)return e;try{return e=JSON.parse(e),Array.isArray(e)?{}:"object"==typeof e?e:{}}catch{return{}}}_extensions(){const e=Array.from(o.extensionManager._loadedExtensions.keys());return"string"!=typeof e[0]&&e.push(""),e}test(e){return t.toString(e.INPUT||"")}run({FUNCNAME:e,EXTLIST:n,INPUT:r},o,u){return n=t.toString(n),e=t.toString(e),(s._primitives[`${n}_${e}`]||s[`ext_${n}`][e])(this._parseJSON(t.toString(r)),o,u)}getBlocks({EXTLIST:e},t,n){const r=s[`ext_${e}`],o=[];if(r&&"function"==typeof r.getInfo){const e=r.getInfo().blocks;if(!e)return o;for(let t=0;t<e.length;t++)o.push(e[t])}return o}runcommand(){}runreporter(){}runboolean(){}getfunctions(){}})}(Scratch);