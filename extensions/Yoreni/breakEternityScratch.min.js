/**!
 * Extension Exposer
 * @author 0znzw <meow@miyo.lol> (@link https://scratch.mit.edu/users/0znzw/)
 * @version 1.1
 * @license MIT AND LGPL-3.0
 * @comment Thanks to Yoreni for the original idea. I rewrote the entire extension.
 * Do not remove this comment
 */
!function(t){"use strict";if(!t.extensions.unsandboxed)throw new Error('"Breaking Eternity" extension must be ran unsandboxed.');const e=(()=>{const t={};
/**! @license MIT License
      Copyright (c) 2024 Timothy Stiles https://github.com/Patashu/break_eternity.js/
      Permission is hereby granted, free of charge, to any person obtaining a copy
      of this software and associated documentation files (the "Software"), to deal
      in the Software without restriction, including without limitation the rights
      to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
      copies of the Software, and to permit persons to whom the Software is
      furnished to do so, subject to the following conditions:
      The above copyright notice and this permission notice shall be included in all
      copies or substantial portions of the Software.
      THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
      IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
      FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
      AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
      LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
      OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE
      SOFTWARE.
    */var e;return e=function(){function t(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function e(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function r(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}var n=function(){function e(r){t(this,e),this.map=new Map,this.first=void 0,this.last=void 0,this.maxSize=r}return r(e,[{key:"size",get:function(){return this.map.size}},{key:"get",value:function(t){var e=this.map.get(t);if(void 0!==e)return e!==this.first&&(e===this.last?(this.last=e.prev,this.last.next=void 0):(e.prev.next=e.next,e.next.prev=e.prev),e.next=this.first,this.first.prev=e,this.first=e),e.value}},{key:"set",value:function(t,e){if(!(this.maxSize<1)){if(this.map.has(t))throw new Error("Cannot update existing keys in the cache");var r=new a(t,e);for(void 0===this.first?(this.first=r,this.last=r):(r.next=this.first,this.first.prev=r,this.first=r),this.map.set(t,r);this.map.size>this.maxSize;){var n=this.last;this.map.delete(n.key),this.last=n.prev,this.last.next=void 0}}}}]),e}(),a=r((function e(r,n){t(this,e),this.next=void 0,this.prev=void 0,this.key=r,this.value=n})),i=9e15,s=Math.log10(9e15),u=1/9e15,o=function(){for(var t=[],e=-323;e<=308;e++)t.push(Number("1e"+e));return function(e){return t[e+323]}}(),l=[2,Math.E,3,4,5,6,7,8,9,10],h=[[1,1.0891180521811203,1.1789767925673957,1.2701455431742086,1.3632090180450092,1.4587818160364217,1.5575237916251419,1.6601571006859253,1.767485818836978,1.8804192098842727,2],[1,1.1121114330934079,1.231038924931609,1.3583836963111375,1.4960519303993531,1.6463542337511945,1.8121385357018724,1.996971324618307,2.2053895545527546,2.4432574483385254,Math.E],[1,1.1187738849693603,1.2464963939368214,1.38527004705667,1.5376664685821402,1.7068895236551784,1.897001227148399,2.1132403089001035,2.362480153784171,2.6539010333870774,3],[1,1.1367350847096405,1.2889510672956703,1.4606478703324786,1.6570295196661111,1.8850062585672889,2.1539465047453485,2.476829779693097,2.872061932789197,3.3664204535587183,4],[1,1.1494592900767588,1.319708228183931,1.5166291280087583,1.748171114438024,2.0253263297298045,2.3636668498288547,2.7858359149579424,3.3257226212448145,4.035730287722532,5],[1,1.159225940787673,1.343712473580932,1.5611293155111927,1.8221199554561318,2.14183924486326,2.542468319282638,3.0574682501653316,3.7390572020926873,4.6719550537360774,6],[1,1.1670905356972596,1.3632807444991446,1.5979222279405536,1.8842640123816674,2.2416069644878687,2.69893426559423,3.3012632110403577,4.121250340630164,5.281493033448316,7],[1,1.1736630594087796,1.379783782386201,1.6292821855668218,1.9378971836180754,2.3289975651071977,2.8384347394720835,3.5232708454565906,4.478242031114584,5.868592169644505,8],[1,1.1793017514670474,1.394054150657457,1.65664127441059,1.985170999970283,2.4069682290577457,2.9647310119960752,3.7278665320924946,4.814462547283592,6.436522247411611,9],[1,1.1840100246247336,1.4061375836156955,1.6802272208863964,2.026757028388619,2.4770056063449646,3.080525271755482,3.9191964192627284,5.135152840833187,6.989961179534715,10]],c=[[-1,-.9194161097107025,-.8335625019330468,-.7425599821143978,-.6466611521029437,-.5462617907227869,-.4419033816638769,-.3342645487554494,-.224140440909962,-.11241087890006762,0],[-1,-.90603157029014,-.80786507256596,-.7064666939634,-.60294836853664,-.49849837513117,-.39430303318768,-.29147201034755,-.19097820800866,-.09361896280296,0],[-1,-.9021579584316141,-.8005762598234203,-.6964780623319391,-.5911906810998454,-.486050182576545,-.3823089430815083,-.28106046722897615,-.1831906535795894,-.08935809204418144,0],[-1,-.8917227442365535,-.781258746326964,-.6705130326902455,-.5612813129406509,-.4551067709033134,-.35319256652135966,-.2563741554088552,-.1651412821106526,-.0796919581982668,0],[-1,-.8843387974366064,-.7678744063886243,-.6529563724510552,-.5415870994657841,-.4352842206588936,-.33504449124791424,-.24138853420685147,-.15445285440944467,-.07409659641336663,0],[-1,-.8786709358426346,-.7577735191184886,-.6399546189952064,-.527284921869926,-.4211627631006314,-.3223479611761232,-.23107655627789858,-.1472057700818259,-.07035171210706326,0],[-1,-.8740862815291583,-.7497032990976209,-.6297119746181752,-.5161838335958787,-.41036238255751956,-.31277212146489963,-.2233976621705518,-.1418697367979619,-.06762117662323441,0],[-1,-.8702632331800649,-.7430366914122081,-.6213373075161548,-.5072025698095242,-.40171437727184167,-.30517930701410456,-.21736343968190863,-.137710238299109,-.06550774483471955,0],[-1,-.8670016295947213,-.7373984232432306,-.6143173985094293,-.49973884395492807,-.394584953527678,-.2989649949848695,-.21245647317021688,-.13434688362382652,-.0638072667348083,0],[-1,-.8641642839543857,-.732534623168535,-.6083127477059322,-.4934049257184696,-.3885773075899922,-.29376029055315767,-.2083678561173622,-.13155653399373268,-.062401588652553186,0]],m=function(t){return b.fromValue_noAlloc(t)},g=function(t,e,r){return b.fromComponents(t,e,r)},f=function(t,e,r){return b.fromComponents_noNormalize(t,e,r)},d=function(t,e){var r=e+1,n=Math.ceil(Math.log10(Math.abs(t))),a=Math.round(t*Math.pow(10,r-n))*Math.pow(10,n-r);return parseFloat(a.toFixed(Math.max(r-n,0)))},p=function(t){return Math.sign(t)*Math.log10(Math.abs(t))},y=.5671432904097838,v=function(t){var e,r,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1e-10,a=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];if(!Number.isFinite(t))return t;if(a){if(0===t)return t;if(1===t)return y;e=t<10?0:Math.log(t)-Math.log(Math.log(t))}else{if(0===t)return-1/0;e=t<=-.1?-2:Math.log(-t)-Math.log(-Math.log(-t))}for(var i=0;i<100;++i){if(r=(t*Math.exp(-e)+e*e)/(e+1),Math.abs(r-e)<n*Math.abs(r))return r;e=r}throw Error("Iteration failed to converge: ".concat(t.toString()))};function N(t){var e,r,n,a,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1e-10,s=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];if(!Number.isFinite(t.mag))return new b(t);if(s){if(t.eq(b.dZero))return f(0,0,0);if(t.eq(b.dOne))return b.fromNumber(y);e=b.ln(t)}else{if(t.eq(b.dZero))return new b(b.dNegInf);e=b.ln(t.neg())}for(var u=0;u<100;++u){if(r=e.neg().exp(),n=e.sub(t.mul(r)),a=e.sub(n.div(e.add(1).sub(e.add(2).mul(n).div(b.mul(2,e).add(2))))),b.abs(a.sub(e)).lt(b.abs(a).mul(i)))return a;e=a}throw Error("Iteration failed to converge: ".concat(t.toString()))}var b=function(){function e(r){t(this,e),this.sign=0,this.mag=0,this.layer=0,r instanceof e?this.fromDecimal(r):"number"==typeof r?this.fromNumber(r):"string"==typeof r&&this.fromString(r)}return r(e,[{key:"m",get:function(){if(0===this.sign)return 0;if(0===this.layer){var t,e=Math.floor(Math.log10(this.mag));return t=5e-324===this.mag?5:this.mag/o(e),this.sign*t}if(1===this.layer){var r=this.mag-Math.floor(this.mag);return this.sign*Math.pow(10,r)}return this.sign},set:function(t){this.layer<=2?this.fromMantissaExponent(t,this.e):(this.sign=Math.sign(t),0===this.sign&&(this.layer=0,this.exponent=0))}},{key:"e",get:function(){return 0===this.sign?0:0===this.layer?Math.floor(Math.log10(this.mag)):1===this.layer?Math.floor(this.mag):2===this.layer?Math.floor(Math.sign(this.mag)*Math.pow(10,Math.abs(this.mag))):this.mag*Number.POSITIVE_INFINITY},set:function(t){this.fromMantissaExponent(this.m,t)}},{key:"s",get:function(){return this.sign},set:function(t){0===t?(this.sign=0,this.layer=0,this.mag=0):this.sign=t}},{key:"mantissa",get:function(){return this.m},set:function(t){this.m=t}},{key:"exponent",get:function(){return this.e},set:function(t){this.e=t}},{key:"normalize",value:function(){if(0===this.sign||0===this.mag&&0===this.layer||this.mag===Number.NEGATIVE_INFINITY&&this.layer>0&&Number.isFinite(this.layer))return this.sign=0,this.mag=0,this.layer=0,this;if(0===this.layer&&this.mag<0&&(this.mag=-this.mag,this.sign=-this.sign),this.mag===Number.POSITIVE_INFINITY||this.layer===Number.POSITIVE_INFINITY||this.mag===Number.NEGATIVE_INFINITY||this.layer===Number.NEGATIVE_INFINITY)return this.mag=Number.POSITIVE_INFINITY,this.layer=Number.POSITIVE_INFINITY,this;if(0===this.layer&&this.mag<u)return this.layer+=1,this.mag=Math.log10(this.mag),this;var t=Math.abs(this.mag),e=Math.sign(this.mag);if(t>=i)return this.layer+=1,this.mag=e*Math.log10(t),this;for(;t<s&&this.layer>0;)this.layer-=1,0===this.layer?this.mag=Math.pow(10,this.mag):(this.mag=e*Math.pow(10,t),t=Math.abs(this.mag),e=Math.sign(this.mag));return 0===this.layer&&(this.mag<0?(this.mag=-this.mag,this.sign=-this.sign):0===this.mag&&(this.sign=0)),(Number.isNaN(this.sign)||Number.isNaN(this.layer)||Number.isNaN(this.mag))&&(this.sign=Number.NaN,this.layer=Number.NaN,this.mag=Number.NaN),this}},{key:"fromComponents",value:function(t,e,r){return this.sign=t,this.layer=e,this.mag=r,this.normalize(),this}},{key:"fromComponents_noNormalize",value:function(t,e,r){return this.sign=t,this.layer=e,this.mag=r,this}},{key:"fromMantissaExponent",value:function(t,e){return this.layer=1,this.sign=Math.sign(t),t=Math.abs(t),this.mag=e+Math.log10(t),this.normalize(),this}},{key:"fromMantissaExponent_noNormalize",value:function(t,e){return this.fromMantissaExponent(t,e),this}},{key:"fromDecimal",value:function(t){return this.sign=t.sign,this.layer=t.layer,this.mag=t.mag,this}},{key:"fromNumber",value:function(t){return this.mag=Math.abs(t),this.sign=Math.sign(t),this.layer=0,this.normalize(),this}},{key:"fromString",value:function(t){var r=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=t,a=e.fromStringCache.get(n);if(void 0!==a)return this.fromDecimal(a);var i=(t=t.replace(",","")).split("^^^");if(2===i.length){var s=parseFloat(i[0]),u=parseFloat(i[1]),o=i[1].split(";"),l=1;if(2===o.length&&(l=parseFloat(o[1]),isFinite(l)||(l=1)),isFinite(s)&&isFinite(u)){var h=e.pentate(s,u,l,r);return this.sign=h.sign,this.layer=h.layer,this.mag=h.mag,e.fromStringCache.maxSize>=1&&e.fromStringCache.set(n,e.fromDecimal(this)),this}}var c=t.split("^^");if(2===c.length){var f=parseFloat(c[0]),d=parseFloat(c[1]),y=c[1].split(";"),v=1;if(2===y.length&&(v=parseFloat(y[1]),isFinite(v)||(v=1)),isFinite(f)&&isFinite(d)){var N=e.tetrate(f,d,v,r);return this.sign=N.sign,this.layer=N.layer,this.mag=N.mag,e.fromStringCache.maxSize>=1&&e.fromStringCache.set(n,e.fromDecimal(this)),this}}var b,w,k=t.split("^");if(2===k.length){var I=parseFloat(k[0]),x=parseFloat(k[1]);if(isFinite(I)&&isFinite(x)){var M=e.pow(I,x);return this.sign=M.sign,this.layer=M.layer,this.mag=M.mag,e.fromStringCache.maxSize>=1&&e.fromStringCache.set(n,e.fromDecimal(this)),this}}var S=(t=t.trim().toLowerCase()).split("pt");if(2===S.length){b=10;var T=!1;"-"==S[0][0]&&(T=!0,S[0]=S[0].slice(1)),w=parseFloat(S[0]),S[1]=S[1].replace("(",""),S[1]=S[1].replace(")","");var _=parseFloat(S[1]);if(isFinite(_)||(_=1),isFinite(b)&&isFinite(w)){var q=e.tetrate(b,w,_,r);return this.sign=q.sign,this.layer=q.layer,this.mag=q.mag,e.fromStringCache.maxSize>=1&&e.fromStringCache.set(n,e.fromDecimal(this)),T&&(this.sign*=-1),this}}if(2===(S=t.split("p")).length){b=10;var R=!1;"-"==S[0][0]&&(R=!0,S[0]=S[0].slice(1)),w=parseFloat(S[0]),S[1]=S[1].replace("(",""),S[1]=S[1].replace(")","");var E=parseFloat(S[1]);if(isFinite(E)||(E=1),isFinite(b)&&isFinite(w)){var F=e.tetrate(b,w,E,r);return this.sign=F.sign,this.layer=F.layer,this.mag=F.mag,e.fromStringCache.maxSize>=1&&e.fromStringCache.set(n,e.fromDecimal(this)),R&&(this.sign*=-1),this}}if(2===(S=t.split("f")).length){b=10;var O=!1;"-"==S[0][0]&&(O=!0,S[0]=S[0].slice(1)),S[0]=S[0].replace("(",""),S[0]=S[0].replace(")","");var V=parseFloat(S[0]);if(S[1]=S[1].replace("(",""),S[1]=S[1].replace(")",""),w=parseFloat(S[1]),isFinite(V)||(V=1),isFinite(b)&&isFinite(w)){var G=e.tetrate(b,w,V,r);return this.sign=G.sign,this.layer=G.layer,this.mag=G.mag,e.fromStringCache.maxSize>=1&&e.fromStringCache.set(n,e.fromDecimal(this)),O&&(this.sign*=-1),this}}var D=t.split("e"),P=D.length-1;if(0===P){var Z=parseFloat(t);if(isFinite(Z))return this.fromNumber(Z),e.fromStringCache.size>=1&&e.fromStringCache.set(n,e.fromDecimal(this)),this}else if(1===P){var C=parseFloat(t);if(isFinite(C)&&0!==C)return this.fromNumber(C),e.fromStringCache.maxSize>=1&&e.fromStringCache.set(n,e.fromDecimal(this)),this}var A=t.split("e^");if(2===A.length){this.sign=1,"-"==A[0].charAt(0)&&(this.sign=-1);for(var z="",L=0;L<A[1].length;++L){var Y=A[1].charCodeAt(L);if(!(Y>=43&&Y<=57||101===Y)){if(this.layer=parseFloat(z),this.mag=parseFloat(A[1].substr(L+1)),this.layer<0||this.layer%1!=0){var $=e.tetrate(10,this.layer,this.mag,r);this.sign=$.sign,this.layer=$.layer,this.mag=$.mag}return this.normalize(),e.fromStringCache.maxSize>=1&&e.fromStringCache.set(n,e.fromDecimal(this)),this}z+=A[1].charAt(L)}}if(P<1)return this.sign=0,this.layer=0,this.mag=0,e.fromStringCache.maxSize>=1&&e.fromStringCache.set(n,e.fromDecimal(this)),this;var B=parseFloat(D[0]);if(0===B)return this.sign=0,this.layer=0,this.mag=0,e.fromStringCache.maxSize>=1&&e.fromStringCache.set(n,e.fromDecimal(this)),this;var U=parseFloat(D[D.length-1]);if(P>=2){var X=parseFloat(D[D.length-2]);isFinite(X)&&(U*=Math.sign(X),U+=p(X))}if(isFinite(B))if(1===P)this.sign=Math.sign(B),this.layer=1,this.mag=U+Math.log10(Math.abs(B));else{if(this.sign=Math.sign(B),this.layer=P,2===P){var W=e.mul(g(1,2,U),m(B));return this.sign=W.sign,this.layer=W.layer,this.mag=W.mag,e.fromStringCache.maxSize>=1&&e.fromStringCache.set(n,e.fromDecimal(this)),this}this.mag=U}else this.sign="-"===D[0]?-1:1,this.layer=P,this.mag=U;return this.normalize(),e.fromStringCache.maxSize>=1&&e.fromStringCache.set(n,e.fromDecimal(this)),this}},{key:"fromValue",value:function(t){return t instanceof e?this.fromDecimal(t):"number"==typeof t?this.fromNumber(t):"string"==typeof t?this.fromString(t):(this.sign=0,this.layer=0,this.mag=0,this)}},{key:"toNumber",value:function(){return this.mag===Number.POSITIVE_INFINITY&&this.layer===Number.POSITIVE_INFINITY&&1===this.sign?Number.POSITIVE_INFINITY:this.mag===Number.POSITIVE_INFINITY&&this.layer===Number.POSITIVE_INFINITY&&-1===this.sign?Number.NEGATIVE_INFINITY:Number.isFinite(this.layer)?0===this.layer?this.sign*this.mag:1===this.layer?this.sign*Math.pow(10,this.mag):this.mag>0?this.sign>0?Number.POSITIVE_INFINITY:Number.NEGATIVE_INFINITY:0:Number.NaN}},{key:"mantissaWithDecimalPlaces",value:function(t){return isNaN(this.m)?Number.NaN:0===this.m?0:d(this.m,t)}},{key:"magnitudeWithDecimalPlaces",value:function(t){return isNaN(this.mag)?Number.NaN:0===this.mag?0:d(this.mag,t)}},{key:"toString",value:function(){return isNaN(this.layer)||isNaN(this.sign)||isNaN(this.mag)?"NaN":this.mag===Number.POSITIVE_INFINITY||this.layer===Number.POSITIVE_INFINITY?1===this.sign?"Infinity":"-Infinity":0===this.layer?this.mag<1e21&&this.mag>1e-7||0===this.mag?(this.sign*this.mag).toString():this.m+"e"+this.e:1===this.layer?this.m+"e"+this.e:this.layer<=5?(-1===this.sign?"-":"")+"e".repeat(this.layer)+this.mag:(-1===this.sign?"-":"")+"(e^"+this.layer+")"+this.mag}},{key:"toExponential",value:function(t){return 0===this.layer?(this.sign*this.mag).toExponential(t):this.toStringWithDecimalPlaces(t)}},{key:"toFixed",value:function(t){return 0===this.layer?(this.sign*this.mag).toFixed(t):this.toStringWithDecimalPlaces(t)}},{key:"toPrecision",value:function(t){return this.e<=-7?this.toExponential(t-1):t>this.e?this.toFixed(t-this.exponent-1):this.toExponential(t-1)}},{key:"valueOf",value:function(){return this.toString()}},{key:"toJSON",value:function(){return this.toString()}},{key:"toStringWithDecimalPlaces",value:function(t){return 0===this.layer?this.mag<1e21&&this.mag>1e-7||0===this.mag?(this.sign*this.mag).toFixed(t):d(this.m,t)+"e"+d(this.e,t):1===this.layer?d(this.m,t)+"e"+d(this.e,t):this.layer<=5?(-1===this.sign?"-":"")+"e".repeat(this.layer)+d(this.mag,t):(-1===this.sign?"-":"")+"(e^"+this.layer+")"+d(this.mag,t)}},{key:"abs",value:function(){return f(0===this.sign?0:1,this.layer,this.mag)}},{key:"neg",value:function(){return f(-this.sign,this.layer,this.mag)}},{key:"negate",value:function(){return this.neg()}},{key:"negated",value:function(){return this.neg()}},{key:"sgn",value:function(){return this.sign}},{key:"round",value:function(){return this.mag<0?f(0,0,0):0===this.layer?g(this.sign,0,Math.round(this.mag)):new e(this)}},{key:"floor",value:function(){return this.mag<0?-1===this.sign?f(-1,0,1):f(0,0,0):-1===this.sign?this.neg().ceil().neg():0===this.layer?g(this.sign,0,Math.floor(this.mag)):new e(this)}},{key:"ceil",value:function(){return this.mag<0?1===this.sign?f(1,0,1):f(0,0,0):-1===this.sign?this.neg().floor().neg():0===this.layer?g(this.sign,0,Math.ceil(this.mag)):new e(this)}},{key:"trunc",value:function(){return this.mag<0?f(0,0,0):0===this.layer?g(this.sign,0,Math.trunc(this.mag)):new e(this)}},{key:"add",value:function(t){var r,n,a=m(t);if(this.eq(e.dInf)&&a.eq(e.dNegInf)||this.eq(e.dNegInf)&&a.eq(e.dInf))return new e(e.dNaN);if(!Number.isFinite(this.layer))return new e(this);if(!Number.isFinite(a.layer))return new e(a);if(0===this.sign)return new e(a);if(0===a.sign)return new e(this);if(this.sign===-a.sign&&this.layer===a.layer&&this.mag===a.mag)return f(0,0,0);if(this.layer>=2||a.layer>=2)return this.maxabs(a);if(e.cmpabs(this,a)>0?(r=new e(this),n=new e(a)):(r=new e(a),n=new e(this)),0===r.layer&&0===n.layer)return e.fromNumber(r.sign*r.mag+n.sign*n.mag);var i=r.layer*Math.sign(r.mag),s=n.layer*Math.sign(n.mag);if(i-s>=2)return r;if(0===i&&-1===s){if(Math.abs(n.mag-Math.log10(r.mag))>17)return r;var u=Math.pow(10,Math.log10(r.mag)-n.mag),o=n.sign+r.sign*u;return g(Math.sign(o),1,n.mag+Math.log10(Math.abs(o)))}if(1===i&&0===s){if(Math.abs(r.mag-Math.log10(n.mag))>17)return r;var l=Math.pow(10,r.mag-Math.log10(n.mag)),h=n.sign+r.sign*l;return g(Math.sign(h),1,Math.log10(n.mag)+Math.log10(Math.abs(h)))}if(Math.abs(r.mag-n.mag)>17)return r;var c=Math.pow(10,r.mag-n.mag),d=n.sign+r.sign*c;return g(Math.sign(d),1,n.mag+Math.log10(Math.abs(d)))}},{key:"plus",value:function(t){return this.add(t)}},{key:"sub",value:function(t){return this.add(m(t).neg())}},{key:"subtract",value:function(t){return this.sub(t)}},{key:"minus",value:function(t){return this.sub(t)}},{key:"mul",value:function(t){var r,n,a=m(t);if(this.eq(e.dInf)&&a.eq(e.dNegInf)||this.eq(e.dNegInf)&&a.eq(e.dInf))return new e(e.dNegInf);if(this.mag==Number.POSITIVE_INFINITY&&a.eq(e.dZero)||this.eq(e.dZero)&&this.mag==Number.POSITIVE_INFINITY)return new e(e.dNaN);if(this.eq(e.dNegInf)&&a.eq(e.dNegInf))return new e(e.dInf);if(!Number.isFinite(this.layer))return new e(this);if(!Number.isFinite(a.layer))return new e(a);if(0===this.sign||0===a.sign)return f(0,0,0);if(this.layer===a.layer&&this.mag===-a.mag)return f(this.sign*a.sign,0,1);if(this.layer>a.layer||this.layer==a.layer&&Math.abs(this.mag)>Math.abs(a.mag)?(r=new e(this),n=new e(a)):(r=new e(a),n=new e(this)),0===r.layer&&0===n.layer)return e.fromNumber(r.sign*n.sign*r.mag*n.mag);if(r.layer>=3||r.layer-n.layer>=2)return g(r.sign*n.sign,r.layer,r.mag);if(1===r.layer&&0===n.layer)return g(r.sign*n.sign,1,r.mag+Math.log10(n.mag));if(1===r.layer&&1===n.layer)return g(r.sign*n.sign,1,r.mag+n.mag);if(2===r.layer&&1===n.layer){var i=g(Math.sign(r.mag),r.layer-1,Math.abs(r.mag)).add(g(Math.sign(n.mag),n.layer-1,Math.abs(n.mag)));return g(r.sign*n.sign,i.layer+1,i.sign*i.mag)}if(2===r.layer&&2===n.layer){var s=g(Math.sign(r.mag),r.layer-1,Math.abs(r.mag)).add(g(Math.sign(n.mag),n.layer-1,Math.abs(n.mag)));return g(r.sign*n.sign,s.layer+1,s.sign*s.mag)}throw Error("Bad arguments to mul: "+this+", "+t)}},{key:"multiply",value:function(t){return this.mul(t)}},{key:"times",value:function(t){return this.mul(t)}},{key:"div",value:function(t){var e=m(t);return this.mul(e.recip())}},{key:"divide",value:function(t){return this.div(t)}},{key:"divideBy",value:function(t){return this.div(t)}},{key:"dividedBy",value:function(t){return this.div(t)}},{key:"recip",value:function(){return 0===this.mag?new e(e.dNaN):this.mag===Number.POSITIVE_INFINITY?f(0,0,0):0===this.layer?g(this.sign,0,1/this.mag):g(this.sign,this.layer,-this.mag)}},{key:"reciprocal",value:function(){return this.recip()}},{key:"reciprocate",value:function(){return this.recip()}},{key:"mod",value:function(t){var r=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=m(t),a=n.abs();if(this.eq(e.dZero)||a.eq(e.dZero))return f(0,0,0);if(r){var i=this.abs().mod(a);return-1==this.sign!=(-1==n.sign)&&(i=n.abs().sub(i)),i.mul(n.sign)}var s=this.toNumber(),u=a.toNumber();return isFinite(s)&&isFinite(u)&&0!=s&&0!=u?new e(s%u):this.sub(a).eq(this)?f(0,0,0):a.sub(this).eq(a)?new e(this):-1==this.sign?this.abs().mod(a).neg():this.sub(this.div(a).floor().mul(a))}},{key:"modulo",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return this.mod(t,e)}},{key:"modular",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return this.mod(t,e)}},{key:"cmp",value:function(t){var e=m(t);return this.sign>e.sign?1:this.sign<e.sign?-1:this.sign*this.cmpabs(t)}},{key:"cmpabs",value:function(t){var e=m(t),r=this.mag>0?this.layer:-this.layer,n=e.mag>0?e.layer:-e.layer;return r>n?1:r<n?-1:this.mag>e.mag?1:this.mag<e.mag?-1:0}},{key:"compare",value:function(t){return this.cmp(t)}},{key:"isNan",value:function(){return isNaN(this.sign)||isNaN(this.layer)||isNaN(this.mag)}},{key:"isFinite",value:function(t){function e(){return t.apply(this,arguments)}return e.toString=function(){return t.toString()},e}((function(){return isFinite(this.sign)&&isFinite(this.layer)&&isFinite(this.mag)}))},{key:"eq",value:function(t){var e=m(t);return this.sign===e.sign&&this.layer===e.layer&&this.mag===e.mag}},{key:"equals",value:function(t){return this.eq(t)}},{key:"neq",value:function(t){return!this.eq(t)}},{key:"notEquals",value:function(t){return this.neq(t)}},{key:"lt",value:function(t){return-1===this.cmp(t)}},{key:"lte",value:function(t){return!this.gt(t)}},{key:"gt",value:function(t){return 1===this.cmp(t)}},{key:"gte",value:function(t){return!this.lt(t)}},{key:"max",value:function(t){var r=m(t);return this.lt(r)?new e(r):new e(this)}},{key:"min",value:function(t){var r=m(t);return this.gt(r)?new e(r):new e(this)}},{key:"maxabs",value:function(t){var r=m(t);return this.cmpabs(r)<0?new e(r):new e(this)}},{key:"minabs",value:function(t){var r=m(t);return this.cmpabs(r)>0?new e(r):new e(this)}},{key:"clamp",value:function(t,e){return this.max(t).min(e)}},{key:"clampMin",value:function(t){return this.max(t)}},{key:"clampMax",value:function(t){return this.min(t)}},{key:"cmp_tolerance",value:function(t,e){var r=m(t);return this.eq_tolerance(r,e)?0:this.cmp(r)}},{key:"compare_tolerance",value:function(t,e){return this.cmp_tolerance(t,e)}},{key:"eq_tolerance",value:function(t,e){var r=m(t);if(null==e&&(e=1e-7),this.sign!==r.sign)return!1;if(Math.abs(this.layer-r.layer)>1)return!1;var n=this.mag,a=r.mag;return this.layer>r.layer&&(a=p(a)),this.layer<r.layer&&(n=p(n)),Math.abs(n-a)<=e*Math.max(Math.abs(n),Math.abs(a))}},{key:"equals_tolerance",value:function(t,e){return this.eq_tolerance(t,e)}},{key:"neq_tolerance",value:function(t,e){return!this.eq_tolerance(t,e)}},{key:"notEquals_tolerance",value:function(t,e){return this.neq_tolerance(t,e)}},{key:"lt_tolerance",value:function(t,e){var r=m(t);return!this.eq_tolerance(r,e)&&this.lt(r)}},{key:"lte_tolerance",value:function(t,e){var r=m(t);return this.eq_tolerance(r,e)||this.lt(r)}},{key:"gt_tolerance",value:function(t,e){var r=m(t);return!this.eq_tolerance(r,e)&&this.gt(r)}},{key:"gte_tolerance",value:function(t,e){var r=m(t);return this.eq_tolerance(r,e)||this.gt(r)}},{key:"pLog10",value:function(){return this.lt(e.dZero)?f(0,0,0):this.log10()}},{key:"absLog10",value:function(){return 0===this.sign?new e(e.dNaN):this.layer>0?g(Math.sign(this.mag),this.layer-1,Math.abs(this.mag)):g(1,0,Math.log10(this.mag))}},{key:"log10",value:function(){return this.sign<=0?new e(e.dNaN):this.layer>0?g(Math.sign(this.mag),this.layer-1,Math.abs(this.mag)):g(this.sign,0,Math.log10(this.mag))}},{key:"log",value:function(t){return t=m(t),this.sign<=0||t.sign<=0||1===t.sign&&0===t.layer&&1===t.mag?new e(e.dNaN):0===this.layer&&0===t.layer?g(this.sign,0,Math.log(this.mag)/Math.log(t.mag)):e.div(this.log10(),t.log10())}},{key:"log2",value:function(){return this.sign<=0?new e(e.dNaN):0===this.layer?g(this.sign,0,Math.log2(this.mag)):1===this.layer?g(Math.sign(this.mag),0,3.321928094887362*Math.abs(this.mag)):2===this.layer?g(Math.sign(this.mag),1,Math.abs(this.mag)+.5213902276543247):g(Math.sign(this.mag),this.layer-1,Math.abs(this.mag))}},{key:"ln",value:function(){return this.sign<=0?new e(e.dNaN):0===this.layer?g(this.sign,0,Math.log(this.mag)):1===this.layer?g(Math.sign(this.mag),0,2.302585092994046*Math.abs(this.mag)):2===this.layer?g(Math.sign(this.mag),1,Math.abs(this.mag)+.36221568869946325):g(Math.sign(this.mag),this.layer-1,Math.abs(this.mag))}},{key:"logarithm",value:function(t){return this.log(t)}},{key:"pow",value:function(t){var r=m(t),n=new e(this),a=new e(r);if(0===n.sign)return a.eq(0)?f(1,0,1):n;if(1===n.sign&&0===n.layer&&1===n.mag)return n;if(0===a.sign)return f(1,0,1);if(1===a.sign&&0===a.layer&&1===a.mag)return n;var i=n.absLog10().mul(a).pow10();return-1===this.sign?Math.abs(a.toNumber()%2)%2==1?i.neg():Math.abs(a.toNumber()%2)%2==0?i:new e(e.dNaN):i}},{key:"pow10",value:function(){if(this.eq(e.dInf))return new e(e.dInf);if(this.eq(e.dNegInf))return f(0,0,0);if(!Number.isFinite(this.layer)||!Number.isFinite(this.mag))return new e(e.dNaN);var t=new e(this);if(0===t.layer){var r=Math.pow(10,t.sign*t.mag);if(Number.isFinite(r)&&Math.abs(r)>=.1)return g(1,0,r);if(0===t.sign)return f(1,0,1);t=f(t.sign,t.layer+1,Math.log10(t.mag))}return t.sign>0&&t.mag>=0?g(t.sign,t.layer+1,t.mag):t.sign<0&&t.mag>=0?g(-t.sign,t.layer+1,-t.mag):f(1,0,1)}},{key:"pow_base",value:function(t){return m(t).pow(this)}},{key:"root",value:function(t){var e=m(t);return this.lt(0)&&e.mod(2,!0).eq(1)?this.neg().root(e).neg():this.pow(e.recip())}},{key:"factorial",value:function(){return this.mag<0||0===this.layer?this.add(1).gamma():1===this.layer?e.exp(e.mul(this,e.ln(this).sub(1))):e.exp(this)}},{key:"gamma",value:function(){if(this.mag<0)return this.recip();if(0===this.layer){if(this.lt(f(1,0,24)))return e.fromNumber(function(t){if(!isFinite(t))return t;if(t<-50)return t===Math.trunc(t)?Number.NEGATIVE_INFINITY:0;for(var e=1;t<10;)e*=t,++t;var r=.9189385332046727;r+=(.5+(t-=1))*Math.log(t),r-=t;var n=t*t,a=t;return r+=1/(12*a),r-=1/(360*(a*=n)),r+=1/(1260*(a*=n)),r-=1/(1680*(a*=n)),r+=1/(1188*(a*=n)),r-=691/(360360*(a*=n)),r+=7/(1092*(a*=n)),r-=3617/(122400*(a*=n)),Math.exp(r)/e}(this.sign*this.mag));var t=this.mag-1,r=.9189385332046727;r+=(t+.5)*Math.log(t);var n=t*t,a=t,i=12*a,s=1/i,u=(r-=t)+s;if(u===r)return e.exp(r);if((u=(r=u)-(s=1/(i=360*(a*=n))))===r)return e.exp(r);r=u;var o=1/(i=1260*(a*=n));return r+=o,r-=o=1/(i=1680*(a*=n)),e.exp(r)}return 1===this.layer?e.exp(e.mul(this,e.ln(this).sub(1))):e.exp(this)}},{key:"lngamma",value:function(){return this.gamma().ln()}},{key:"exp",value:function(){return this.mag<0?f(1,0,1):0===this.layer&&this.mag<=709.7?e.fromNumber(Math.exp(this.sign*this.mag)):0===this.layer?g(1,1,this.sign*Math.log10(Math.E)*this.mag):1===this.layer?g(1,2,this.sign*(Math.log10(.4342944819032518)+this.mag)):g(1,this.layer+1,this.sign*this.mag)}},{key:"sqr",value:function(){return this.pow(2)}},{key:"sqrt",value:function(){if(0===this.layer)return e.fromNumber(Math.sqrt(this.sign*this.mag));if(1===this.layer)return g(1,2,Math.log10(this.mag)-.3010299956639812);var t=e.div(f(this.sign,this.layer-1,this.mag),f(1,0,2));return t.layer+=1,t.normalize(),t}},{key:"cube",value:function(){return this.pow(3)}},{key:"cbrt",value:function(){return this.lt(0)?this.neg().pow(1/3).neg():this.pow(1/3)}},{key:"tetrate",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:2,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:f(1,0,1),n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(1===t)return e.pow(this,r);if(0===t)return new e(r);if(this.eq(e.dOne))return f(1,0,1);if(this.eq(-1))return e.pow(this,r);if(t===Number.POSITIVE_INFINITY){var a=this.toNumber();if(a<=1.444667861009766&&a>=.06598803584531254){var i=e.ln(this).neg(),s=i.lambertw().div(i);if(a<1)return s;var u=i.lambertw(!1).div(i);return a>1.444667861009099&&(s=u=e.fromNumber(Math.E)),(r=m(r)).eq(u)?u:r.lt(u)?s:new e(e.dInf)}return new e(a>1.444667861009766?e.dInf:e.dNaN)}if(this.eq(e.dZero)){var o=Math.abs((t+1)%2);return o>1&&(o=2-o),e.fromNumber(o)}if(t<0)return e.iteratedlog(r,this,-t,n);r=new e(r);var l=t,h=l-(t=Math.trunc(t));if(this.gt(e.dZero)&&(this.lt(1)||this.lte(1.444667861009766)&&r.lte(e.ln(this).neg().lambertw(!1).div(e.ln(this).neg())))&&(l>1e4||!n)){var c=Math.min(1e4,t);r=r.eq(e.dOne)?this.pow(h):this.lt(1)?r.pow(1-h).mul(this.pow(r).pow(h)):r.layeradd(h,this);for(var g=0;g<c;++g){var d=r;if(r=this.pow(r),d.eq(r))return r}return l>1e4&&Math.ceil(l)%2==1?this.pow(r):r}0!==h&&(r.eq(e.dOne)?this.gt(10)||n?r=this.pow(h):(r=e.fromNumber(e.tetrate_critical(this.toNumber(),h)),this.lt(2)&&(r=r.sub(1).mul(this.minus(1)).plus(1))):r=this.eq(10)?r.layeradd10(h,n):this.lt(1)?r.pow(1-h).mul(this.pow(r).pow(h)):r.layeradd(h,this,n));for(var p=0;p<t;++p){if(r=this.pow(r),!isFinite(r.layer)||!isFinite(r.mag))return r.normalize();if(r.layer-this.layer>3)return f(r.sign,r.layer+(t-p-1),r.mag);if(p>1e4)return r}return r}},{key:"iteratedexp",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:2,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:f(1,0,1),r=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return this.tetrate(t,e,r)}},{key:"iteratedlog",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:10,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(r<0)return e.tetrate(t,-r,this,n);t=m(t);var a=e.fromDecimal(this),i=r-(r=Math.trunc(r));if(a.layer-t.layer>3){var s=Math.min(r,a.layer-t.layer-3);r-=s,a.layer-=s}for(var u=0;u<r;++u){if(a=a.log(t),!isFinite(a.layer)||!isFinite(a.mag))return a.normalize();if(u>1e4)return a}return i>0&&i<1&&(a=t.eq(10)?a.layeradd10(-i,n):a.layeradd(-i,t,n)),a}},{key:"slog",value:function(){for(var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:10,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:100,n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],a=.001,i=!1,s=!1,u=this.slog_internal(t,n).toNumber(),o=1;o<r;++o){var l=new e(t).tetrate(u,e.dOne,n).gt(this);if(o>1&&s!=l&&(i=!0),s=l,i?a/=2:a*=2,u+=a=Math.abs(a)*(l?-1:1),0===a)break}return e.fromNumber(u)}},{key:"slog_internal",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:10,r=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if((t=m(t)).lte(e.dZero))return new e(e.dNaN);if(t.eq(e.dOne))return new e(e.dNaN);if(t.lt(e.dOne))return this.eq(e.dOne)?f(0,0,0):this.eq(e.dZero)?f(-1,0,1):new e(e.dNaN);if(this.mag<0||this.eq(e.dZero))return f(-1,0,1);if(t.lt(1.444667861009766)){var n=e.ln(t).neg(),a=n.lambertw().div(n);if(this.eq(a))return new e(e.dInf);if(this.gt(a))return new e(e.dNaN)}var i=0,s=e.fromDecimal(this);if(s.layer-t.layer>3){var u=s.layer-t.layer-3;i+=u,s.layer-=u}for(var o=0;o<100;++o)if(s.lt(e.dZero))s=e.pow(t,s),i-=1;else{if(s.lte(e.dOne))return r?e.fromNumber(i+s.toNumber()-1):e.fromNumber(i+e.slog_critical(t.toNumber(),s.toNumber()));i+=1,s=e.log(s,t)}return e.fromNumber(i)}},{key:"layeradd10",value:function(t){var r=arguments.length>1&&void 0!==arguments[1]&&arguments[1];t=e.fromValue_noAlloc(t).toNumber();var n=e.fromDecimal(this);if(t>=1){n.mag<0&&n.layer>0?(n.sign=0,n.mag=0,n.layer=0):-1===n.sign&&0==n.layer&&(n.sign=1,n.mag=-n.mag);var a=Math.trunc(t);t-=a,n.layer+=a}if(t<=-1){var i=Math.trunc(t);if(t-=i,n.layer+=i,n.layer<0)for(var s=0;s<100;++s){if(n.layer++,n.mag=Math.log10(n.mag),!isFinite(n.mag))return 0===n.sign&&(n.sign=1),n.layer<0&&(n.layer=0),n.normalize();if(n.layer>=0)break}}for(;n.layer<0;)n.layer++,n.mag=Math.log10(n.mag);return 0===n.sign&&(n.sign=1,0===n.mag&&n.layer>=1&&(n.layer-=1,n.mag=1)),n.normalize(),0!==t?n.layeradd(t,10,r):n}},{key:"layeradd",value:function(t,r){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],a=m(r);if(a.gt(1)&&a.lte(1.444667861009766)){var i=e.excess_slog(this,r,n),s=i[0].toNumber(),u=i[1],o=s+t,l=e.ln(r).neg(),h=l.lambertw().div(l),c=l.lambertw(!1).div(l),g=e.dOne;1==u?g=h.mul(c).sqrt():2==u&&(g=c.mul(2));var f=a.pow(g),d=Math.floor(o),p=o-d,y=g.pow(1-p).mul(f.pow(p));return e.tetrate(a,d,y,n)}var v=this.slog(r,100,n).toNumber()+t;return v>=0?e.tetrate(r,v,e.dOne,n):Number.isFinite(v)?v>=-1?e.log(e.tetrate(r,v+1,e.dOne,n),r):e.log(e.log(e.tetrate(r,v+2,e.dOne,n),r),r):new e(e.dNaN)}},{key:"lambertw",value:function(){var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];return this.lt(-.3678794411710499)?new e(e.dNaN):t?this.abs().lt("1e-300")?new e(this):this.mag<0?e.fromNumber(v(this.toNumber())):0===this.layer?e.fromNumber(v(this.sign*this.mag)):this.lt("eee15")?N(this):this.ln():1===this.sign?new e(e.dNaN):0===this.layer?e.fromNumber(v(this.sign*this.mag,1e-10,!1)):1==this.layer?N(this,1e-10,!1):this.neg().recip().lambertw().neg()}},{key:"ssqrt",value:function(){return this.linear_sroot(2)}},{key:"linear_sroot",value:function(t){if(1==t)return this;if(this.eq(e.dInf))return new e(e.dInf);if(!this.isFinite())return new e(e.dNaN);if(t>0&&t<1)return this.root(t);if(t>-2&&t<-1)return e.fromNumber(t).add(2).pow(this.recip());if(t<=0)return new e(e.dNaN);if(t==Number.POSITIVE_INFINITY){var r=this.toNumber();return r<Math.E&&r>.36787944117144233?this.pow(this.recip()):new e(e.dNaN)}if(this.eq(1))return f(1,0,1);if(this.lt(0))return new e(e.dNaN);if(this.lte("1ee-16"))return new e(t%2==1?this:e.dNaN);if(this.gt(1)){var n=e.dTen;this.gte(e.tetrate(10,t,1,!0))&&(n=this.iteratedlog(10,t-1,!0)),t<=1&&(n=this.root(t));for(var a=e.dZero,i=n.layer,s=n.iteratedlog(10,i,!0),u=s,o=s.div(2),l=!0;l;)o=a.add(s).div(2),e.iteratedexp(10,i,o,!0).tetrate(t,1,!0).gt(this)?s=o:a=o,o.eq(u)?l=!1:u=o;return e.iteratedexp(10,i,o,!0)}for(var h=1,c=g(1,10,1),m=g(1,10,1),d=g(1,10,1),p=g(1,1,-16),y=e.dZero,v=g(1,10,1),N=p.pow10().recip(),b=e.dZero,w=N,k=N,I=Math.ceil(t)%2==0,x=0,M=g(1,10,1),S=!1,T=e.dZero,_=!1;h<4;){if(2==h){if(I)break;d=g(1,10,1),p=c,h=3,v=g(1,10,1),M=g(1,10,1)}for(S=!1;p.neq(d);){if(T=p,p.pow10().recip().tetrate(t,1,!0).eq(1)&&p.pow10().recip().lt(.4))N=p.pow10().recip(),w=p.pow10().recip(),k=p.pow10().recip(),b=e.dZero,x=-1,3==h&&(M=p);else if(p.pow10().recip().tetrate(t,1,!0).eq(p.pow10().recip())&&!I&&p.pow10().recip().lt(.4))N=p.pow10().recip(),w=p.pow10().recip(),k=p.pow10().recip(),b=e.dZero,x=0;else if(p.pow10().recip().tetrate(t,1,!0).eq(p.pow10().recip().mul(2).tetrate(t,1,!0)))N=p.pow10().recip(),w=e.dZero,k=N.mul(2),b=N,x=I?-1:0;else{for(y=p.mul(12e-17),N=p.pow10().recip(),w=p.add(y).pow10().recip(),b=N.sub(w),k=N.add(b);w.tetrate(t,1,!0).eq(N.tetrate(t,1,!0))||k.tetrate(t,1,!0).eq(N.tetrate(t,1,!0))||w.gte(N)||k.lte(N);)y=y.mul(2),w=p.add(y).pow10().recip(),b=N.sub(w),k=N.add(b);if((1==h&&k.tetrate(t,1,!0).gt(N.tetrate(t,1,!0))&&w.tetrate(t,1,!0).gt(N.tetrate(t,1,!0))||3==h&&k.tetrate(t,1,!0).lt(N.tetrate(t,1,!0))&&w.tetrate(t,1,!0).lt(N.tetrate(t,1,!0)))&&(M=p),k.tetrate(t,1,!0).lt(N.tetrate(t,1,!0)))x=-1;else if(I)x=1;else if(3==h&&p.gt_tolerance(c,1e-8))x=0;else{for(;w.tetrate(t,1,!0).eq_tolerance(N.tetrate(t,1,!0),1e-8)||k.tetrate(t,1,!0).eq_tolerance(N.tetrate(t,1,!0),1e-8)||w.gte(N)||k.lte(N);)y=y.mul(2),w=p.add(y).pow10().recip(),b=N.sub(w),k=N.add(b);x=k.tetrate(t,1,!0).sub(N.tetrate(t,1,!0)).lt(N.tetrate(t,1,!0).sub(w.tetrate(t,1,!0)))?0:1}}if(-1==x&&(_=!0),1==h&&1==x||3==h&&0!=x)if(d.eq(g(1,10,1)))p=p.mul(2);else{var q=!1;if(S&&(1==x&&1==h||-1==x&&3==h)&&(q=!0),p=p.add(d).div(2),q)break}else if(d.eq(g(1,10,1)))d=p,p=p.div(2);else{var R=!1;if(S&&(1==x&&1==h||-1==x&&3==h)&&(R=!0),d=d.sub(v),p=p.sub(v),R)break}if(d.sub(p).div(2).abs().gt(v.mul(1.5))&&(S=!0),v=d.sub(p).div(2).abs(),p.gt("1e18"))break;if(p.eq(T))break}if(p.gt("1e18"))break;if(!_)break;if(M==g(1,10,1))break;1==h?c=M:3==h&&(m=M),h++}d=c;for(var E=p=g(1,1,-18),F=e.dZero,O=!0;O;)if(F=d.eq(g(1,10,1))?p.mul(2):d.add(p).div(2),e.pow(10,F).recip().tetrate(t,1,!0).gt(this)?p=F:d=F,F.eq(E)?O=!1:E=F,p.gt("1e18"))return new e(e.dNaN);if(F.eq_tolerance(c,1e-15)){if(m.eq(g(1,10,1)))return new e(e.dNaN);for(d=g(1,10,1),E=p=m,F=e.dZero,O=!0;O;)if(F=d.eq(g(1,10,1))?p.mul(2):d.add(p).div(2),e.pow(10,F).recip().tetrate(t,1,!0).gt(this)?p=F:d=F,F.eq(E)?O=!1:E=F,p.gt("1e18"))return new e(e.dNaN);return F.pow10().recip()}return F.pow10().recip()}},{key:"pentate",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:2,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:f(1,0,1),n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];r=new e(r);var a=t,i=a-(t=Math.floor(t)),s=e.dZero,u=e.dZero;if(0!==i){if(!r.eq(e.dOne))return this.pentate(r.penta_log(this,void 0,n).plus(a).toNumber(),1,n);++t,r=e.fromNumber(i)}if(t>0)for(var o=0;o<t;){if(u=s,s=r,r=this.tetrate(r.toNumber(),e.dOne,n),++o,this.gt(0)&&this.lte(1)&&r.gt(0)&&r.lte(1))return this.tetrate(t-o,r,n);if(r.eq(s)||r.eq(u)&&o%2==t%2)return r.normalize();if(!isFinite(r.layer)||!isFinite(r.mag))return r.normalize();if(o>1e4)return r}else for(var l=0;l<-t;++l){if(s=r,(r=r.slog(this,void 0,n)).eq(s))return r.normalize();if(!isFinite(r.layer)||!isFinite(r.mag))return r.normalize();if(l>100)return r}return r}},{key:"penta_log",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:10,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:100,n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if((t=new e(t)).lte(1))return new e(e.dNaN);if(this.eq(1))return f(0,0,0);if(this.eq(e.dInf))return new e(e.dInf);var a=new e(1),i=0,s=1;if(this.lt(-1)){if(this.lte(-2))return new e(e.dNaN);var u=t.tetrate(this.toNumber(),1,n);if(this.eq(u))return new e(e.dNegInf);if(this.gt(u))return new e(e.dNaN)}if(this.gt(1)){for(;a.lt(this);)if(i++,a=e.tetrate(t,a.toNumber(),1,n),i>1e3)return new e(e.dNaN)}else for(;a.gt(this);)if(i--,a=e.slog(a,t,n),i>100)return new e(e.dNaN);for(var o=1;o<r;++o){var l=t.pentate(i,e.dOne,n);if(l.eq(this))break;var h=l.gt(this);if(i+=s=Math.abs(s)*(h?-1:1),0==(s/=2))break}return e.fromNumber(i)}},{key:"linear_penta_root",value:function(t){return 1==t?this:t<0?new e(e.dNaN):this.eq(e.dInf)?new e(e.dInf):this.isFinite()?t>0&&t<1?this.root(t):this.eq(1)?f(1,0,1):this.lt(0)?new e(e.dNaN):this.lt(1)?this.linear_sroot(t):e.increasingInverse((function(r){return e.pentate(r,t,1,!0)}))(this):new e(e.dNaN)}},{key:"sin",value:function(){return this.mag<0?new e(this):0===this.layer?e.fromNumber(Math.sin(this.sign*this.mag)):f(0,0,0)}},{key:"cos",value:function(){return this.mag<0?f(1,0,1):0===this.layer?e.fromNumber(Math.cos(this.sign*this.mag)):f(0,0,0)}},{key:"tan",value:function(){return this.mag<0?new e(this):0===this.layer?e.fromNumber(Math.tan(this.sign*this.mag)):f(0,0,0)}},{key:"asin",value:function(){return this.mag<0?new e(this):0===this.layer?e.fromNumber(Math.asin(this.sign*this.mag)):new e(e.dNaN)}},{key:"acos",value:function(){return this.mag<0?e.fromNumber(Math.acos(this.toNumber())):0===this.layer?e.fromNumber(Math.acos(this.sign*this.mag)):new e(e.dNaN)}},{key:"atan",value:function(){return this.mag<0?new e(this):0===this.layer?e.fromNumber(Math.atan(this.sign*this.mag)):e.fromNumber(Math.atan(1/0*this.sign))}},{key:"sinh",value:function(){return this.exp().sub(this.negate().exp()).div(2)}},{key:"cosh",value:function(){return this.exp().add(this.negate().exp()).div(2)}},{key:"tanh",value:function(){return this.sinh().div(this.cosh())}},{key:"asinh",value:function(){return e.ln(this.add(this.sqr().add(1).sqrt()))}},{key:"acosh",value:function(){return e.ln(this.add(this.sqr().sub(1).sqrt()))}},{key:"atanh",value:function(){return this.abs().gte(1)?new e(e.dNaN):e.ln(this.add(1).div(e.fromNumber(1).sub(this))).div(2)}},{key:"ascensionPenalty",value:function(t){return 0===t?new e(this):this.root(e.pow(10,t))}},{key:"egg",value:function(){return this.add(9)}},{key:"lessThanOrEqualTo",value:function(t){return this.cmp(t)<1}},{key:"lessThan",value:function(t){return this.cmp(t)<0}},{key:"greaterThanOrEqualTo",value:function(t){return this.cmp(t)>-1}},{key:"greaterThan",value:function(t){return this.cmp(t)>0}}],[{key:"fromComponents",value:function(t,r,n){return(new e).fromComponents(t,r,n)}},{key:"fromComponents_noNormalize",value:function(t,r,n){return(new e).fromComponents_noNormalize(t,r,n)}},{key:"fromMantissaExponent",value:function(t,r){return(new e).fromMantissaExponent(t,r)}},{key:"fromMantissaExponent_noNormalize",value:function(t,r){return(new e).fromMantissaExponent_noNormalize(t,r)}},{key:"fromDecimal",value:function(t){return(new e).fromDecimal(t)}},{key:"fromNumber",value:function(t){return(new e).fromNumber(t)}},{key:"fromString",value:function(t){var r=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return(new e).fromString(t,r)}},{key:"fromValue",value:function(t){return(new e).fromValue(t)}},{key:"fromValue_noAlloc",value:function(t){if(t instanceof e)return t;if("string"==typeof t){var r=e.fromStringCache.get(t);return void 0!==r?r:e.fromString(t)}return"number"==typeof t?e.fromNumber(t):f(0,0,0)}},{key:"abs",value:function(t){return m(t).abs()}},{key:"neg",value:function(t){return m(t).neg()}},{key:"negate",value:function(t){return m(t).neg()}},{key:"negated",value:function(t){return m(t).neg()}},{key:"sign",value:function(t){return m(t).sign}},{key:"sgn",value:function(t){return m(t).sign}},{key:"round",value:function(t){return m(t).round()}},{key:"floor",value:function(t){return m(t).floor()}},{key:"ceil",value:function(t){return m(t).ceil()}},{key:"trunc",value:function(t){return m(t).trunc()}},{key:"add",value:function(t,e){return m(t).add(e)}},{key:"plus",value:function(t,e){return m(t).add(e)}},{key:"sub",value:function(t,e){return m(t).sub(e)}},{key:"subtract",value:function(t,e){return m(t).sub(e)}},{key:"minus",value:function(t,e){return m(t).sub(e)}},{key:"mul",value:function(t,e){return m(t).mul(e)}},{key:"multiply",value:function(t,e){return m(t).mul(e)}},{key:"times",value:function(t,e){return m(t).mul(e)}},{key:"div",value:function(t,e){return m(t).div(e)}},{key:"divide",value:function(t,e){return m(t).div(e)}},{key:"recip",value:function(t){return m(t).recip()}},{key:"reciprocal",value:function(t){return m(t).recip()}},{key:"reciprocate",value:function(t){return m(t).reciprocate()}},{key:"mod",value:function(t,e){var r=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return m(t).mod(e,r)}},{key:"modulo",value:function(t,e){var r=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return m(t).modulo(e,r)}},{key:"modular",value:function(t,e){var r=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return m(t).modular(e,r)}},{key:"cmp",value:function(t,e){return m(t).cmp(e)}},{key:"cmpabs",value:function(t,e){return m(t).cmpabs(e)}},{key:"compare",value:function(t,e){return m(t).cmp(e)}},{key:"isNaN",value:function(t){function e(e){return t.apply(this,arguments)}return e.toString=function(){return t.toString()},e}((function(t){return t=m(t),isNaN(t.sign)||isNaN(t.layer)||isNaN(t.mag)}))},{key:"isFinite",value:function(t){function e(e){return t.apply(this,arguments)}return e.toString=function(){return t.toString()},e}((function(t){return t=m(t),isFinite(t.sign)&&isFinite(t.layer)&&isFinite(t.mag)}))},{key:"eq",value:function(t,e){return m(t).eq(e)}},{key:"equals",value:function(t,e){return m(t).eq(e)}},{key:"neq",value:function(t,e){return m(t).neq(e)}},{key:"notEquals",value:function(t,e){return m(t).notEquals(e)}},{key:"lt",value:function(t,e){return m(t).lt(e)}},{key:"lte",value:function(t,e){return m(t).lte(e)}},{key:"gt",value:function(t,e){return m(t).gt(e)}},{key:"gte",value:function(t,e){return m(t).gte(e)}},{key:"max",value:function(t,e){return m(t).max(e)}},{key:"min",value:function(t,e){return m(t).min(e)}},{key:"minabs",value:function(t,e){return m(t).minabs(e)}},{key:"maxabs",value:function(t,e){return m(t).maxabs(e)}},{key:"clamp",value:function(t,e,r){return m(t).clamp(e,r)}},{key:"clampMin",value:function(t,e){return m(t).clampMin(e)}},{key:"clampMax",value:function(t,e){return m(t).clampMax(e)}},{key:"cmp_tolerance",value:function(t,e,r){return m(t).cmp_tolerance(e,r)}},{key:"compare_tolerance",value:function(t,e,r){return m(t).cmp_tolerance(e,r)}},{key:"eq_tolerance",value:function(t,e,r){return m(t).eq_tolerance(e,r)}},{key:"equals_tolerance",value:function(t,e,r){return m(t).eq_tolerance(e,r)}},{key:"neq_tolerance",value:function(t,e,r){return m(t).neq_tolerance(e,r)}},{key:"notEquals_tolerance",value:function(t,e,r){return m(t).notEquals_tolerance(e,r)}},{key:"lt_tolerance",value:function(t,e,r){return m(t).lt_tolerance(e,r)}},{key:"lte_tolerance",value:function(t,e,r){return m(t).lte_tolerance(e,r)}},{key:"gt_tolerance",value:function(t,e,r){return m(t).gt_tolerance(e,r)}},{key:"gte_tolerance",value:function(t,e,r){return m(t).gte_tolerance(e,r)}},{key:"pLog10",value:function(t){return m(t).pLog10()}},{key:"absLog10",value:function(t){return m(t).absLog10()}},{key:"log10",value:function(t){return m(t).log10()}},{key:"log",value:function(t,e){return m(t).log(e)}},{key:"log2",value:function(t){return m(t).log2()}},{key:"ln",value:function(t){return m(t).ln()}},{key:"logarithm",value:function(t,e){return m(t).logarithm(e)}},{key:"pow",value:function(t,e){return m(t).pow(e)}},{key:"pow10",value:function(t){return m(t).pow10()}},{key:"root",value:function(t,e){return m(t).root(e)}},{key:"factorial",value:function(t,e){return m(t).factorial()}},{key:"gamma",value:function(t,e){return m(t).gamma()}},{key:"lngamma",value:function(t,e){return m(t).lngamma()}},{key:"exp",value:function(t){return m(t).exp()}},{key:"sqr",value:function(t){return m(t).sqr()}},{key:"sqrt",value:function(t){return m(t).sqrt()}},{key:"cube",value:function(t){return m(t).cube()}},{key:"cbrt",value:function(t){return m(t).cbrt()}},{key:"tetrate",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:f(1,0,1),n=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return m(t).tetrate(e,r,n)}},{key:"iteratedexp",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:f(1,0,1),n=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return m(t).iteratedexp(e,r,n)}},{key:"iteratedlog",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,n=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return m(t).iteratedlog(e,r,n)}},{key:"layeradd10",value:function(t,e){var r=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return m(t).layeradd10(e,r)}},{key:"layeradd",value:function(t,e){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:10,n=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return m(t).layeradd(e,r,n)}},{key:"slog",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10,r=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return m(t).slog(e,100,r)}},{key:"lambertw",value:function(t,e){return m(t).lambertw(e)}},{key:"ssqrt",value:function(t){return m(t).ssqrt()}},{key:"linear_sroot",value:function(t,e){return m(t).linear_sroot(e)}},{key:"pentate",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:f(1,0,1),n=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return m(t).pentate(e,r,n)}},{key:"penta_log",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10,r=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return m(t).penta_log(e,100,r)}},{key:"linear_penta_root",value:function(t,e){return m(t).linear_penta_root(e)}},{key:"sin",value:function(t){return m(t).sin()}},{key:"cos",value:function(t){return m(t).cos()}},{key:"tan",value:function(t){return m(t).tan()}},{key:"asin",value:function(t){return m(t).asin()}},{key:"acos",value:function(t){return m(t).acos()}},{key:"atan",value:function(t){return m(t).atan()}},{key:"sinh",value:function(t){return m(t).sinh()}},{key:"cosh",value:function(t){return m(t).cosh()}},{key:"tanh",value:function(t){return m(t).tanh()}},{key:"asinh",value:function(t){return m(t).asinh()}},{key:"acosh",value:function(t){return m(t).acosh()}},{key:"atanh",value:function(t){return m(t).atanh()}},{key:"affordGeometricSeries",value:function(t,e,r,n){return this.affordGeometricSeries_core(m(t),m(e),m(r),n)}},{key:"sumGeometricSeries",value:function(t,e,r,n){return this.sumGeometricSeries_core(t,m(e),m(r),n)}},{key:"affordArithmeticSeries",value:function(t,e,r,n){return this.affordArithmeticSeries_core(m(t),m(e),m(r),m(n))}},{key:"sumArithmeticSeries",value:function(t,e,r,n){return this.sumArithmeticSeries_core(m(t),m(e),m(r),m(n))}},{key:"efficiencyOfPurchase",value:function(t,e,r){return this.efficiencyOfPurchase_core(m(t),m(e),m(r))}},{key:"randomDecimalForTesting",value:function(t){if(20*Math.random()<1)return f(0,0,0);var e=Math.random()>.5?1:-1;if(20*Math.random()<1)return f(e,0,1);var r=Math.floor(Math.random()*(t+1)),n=0===r?616*Math.random()-308:16*Math.random();Math.random()>.9&&(n=Math.trunc(n));var a=Math.pow(10,n);return Math.random()>.9&&(a=Math.trunc(a)),g(e,r,a)}},{key:"affordGeometricSeries_core",value:function(t,r,n,a){var i=r.mul(n.pow(a));return e.floor(t.div(i).mul(n.sub(1)).add(1).log10().div(n.log10()))}},{key:"sumGeometricSeries_core",value:function(t,r,n,a){return r.mul(n.pow(a)).mul(e.sub(1,n.pow(t))).div(e.sub(1,n))}},{key:"affordArithmeticSeries_core",value:function(t,e,r,n){var a=e.add(n.mul(r)).sub(r.div(2)),i=a.pow(2);return a.neg().add(i.add(r.mul(t).mul(2)).sqrt()).div(r).floor()}},{key:"sumArithmeticSeries_core",value:function(t,e,r,n){var a=e.add(n.mul(r));return t.div(2).mul(a.mul(2).plus(t.sub(1).mul(r)))}},{key:"efficiencyOfPurchase_core",value:function(t,e,r){return t.div(e).add(t.div(r))}},{key:"slog_critical",value:function(t,r){return t>10?r-1:e.critical_section(t,r,c)}},{key:"tetrate_critical",value:function(t,r){return e.critical_section(t,r,h)}},{key:"critical_section",value:function(t,e,r){(e*=10)<0&&(e=0),e>10&&(e=10),t<2&&(t=2),t>10&&(t=10);for(var n=0,a=0,i=0;i<l.length;++i){if(l[i]==t){n=r[i][Math.floor(e)],a=r[i][Math.ceil(e)];break}if(l[i]<t&&l[i+1]>t){var s=(t-l[i])/(l[i+1]-l[i]);n=r[i][Math.floor(e)]*(1-s)+r[i+1][Math.floor(e)]*s,a=r[i][Math.ceil(e)]*(1-s)+r[i+1][Math.ceil(e)]*s;break}}var u=e-Math.floor(e);return n<=0||a<=0?n*(1-u)+a*u:Math.pow(t,Math.log(n)/Math.log(t)*(1-u)+Math.log(a)/Math.log(t)*u)}},{key:"excess_slog",value:function(t,r){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];t=m(t);var a=r=m(r);if(1==(r=r.toNumber())||r<=0)return[new e(e.dNaN),0];if(r>1.444667861009766)return[t.slog(r,100,n),0];var i=e.ln(r).neg(),s=i.lambertw().div(i),u=e.dInf;if(r>1&&(u=i.lambertw(!1).div(i)),r>1.444667861009099&&(s=u=e.fromNumber(Math.E)),t.lt(s))return[t.slog(r,100,n),0];if(t.eq(s))return[new e(e.dInf),0];if(t.eq(u))return[new e(e.dNegInf),2];if(t.gt(u)){var o=u.mul(2),l=a.pow(o),h=0;if(t.gte(o)&&t.lt(l))h=0;else if(t.gte(l)){var c=l;for(h=1;c.lt(t);)if(h+=1,(c=a.pow(c)).layer>3){var g=Math.floor(t.layer-c.layer+1);c=a.iteratedexp(g,c,n),h+=g}c.gt(t)&&(c=c.log(r),h-=1)}else if(t.lt(o)){var f=o;for(h=0;f.gt(t);)f=f.log(r),h-=1}for(var d=0,p=0,y=.5,v=o,N=e.dZero;y>1e-16;){if(p=d+y,v=o.pow(1-p).mul(l.pow(p)),(N=e.iteratedexp(r,h,v)).eq(t))return[new e(h+p),2];N.lt(t)&&(d+=y),y/=2}return N.neq_tolerance(t,1e-7)?[new e(e.dNaN),0]:[new e(h+d),2]}if(t.lt(u)&&t.gt(s)){var b=s.mul(u).sqrt(),w=a.pow(b),k=0;if(t.lte(b)&&t.gt(w))k=0;else if(t.lte(w)){var I=w;for(k=1;I.gt(t);)I=a.pow(I),k+=1;I.lt(t)&&(I=I.log(r),k-=1)}else if(t.gt(b)){var x=b;for(k=0;x.lt(t);)x=x.log(r),k-=1}for(var M=0,S=0,T=.5,_=b,q=e.dZero;T>1e-16;){if(S=M+T,_=b.pow(1-S).mul(w.pow(S)),(q=e.iteratedexp(r,k,_)).eq(t))return[new e(k+S),1];q.gt(t)&&(M+=T),T/=2}return q.neq_tolerance(t,1e-7)?[new e(e.dNaN),0]:[new e(k+M),1]}throw new Error("Unhandled behavior in excess_slog")}},{key:"increasingInverse",value:function(t){var r=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:120,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:e.dLayerMax.neg(),s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:e.dLayerMax,o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:e.dLayerMax.neg(),l=arguments.length>6&&void 0!==arguments[6]?arguments[6]:e.dLayerMax;return function(h){if(h=new e(h),a=new e(a),s=new e(s),o=new e(o),l=new e(l),h.isNan()||s.lt(a)||h.lt(o)||h.gt(l))return new e(e.dNaN);var c=function(t){return new e(t)},m=!0;if(s.lt(0))m=!1;else if(a.gt(0))m=!0;else{var g=t(e.dZero);if(g.eq(h))return f(0,0,0);m=h.gt(g),r&&(m=!m)}var d,p=m;if(m){if(s.lt(u))m=!0;else if(a.gt(u))m=!1;else{var y=t(new e(u));m=h.lt(y),r&&(m=!m)}if(m){d=!0;var v=e.pow(10,i).recip();if(s.lt(v))m=!1;else if(a.gt(v))m=!0;else{var N=t(new e(v));m=h.gt(N),r&&(m=!m)}if(m)c=function(t){return e.pow(10,t).recip()};else{var b=e.tetrate(10,i);if(s.lt(b))m=!1;else if(a.gt(b))m=!0;else{var w=t(new e(b));m=h.gt(w),r&&(m=!m)}c=m?function(t){return e.tetrate(10,new e(t).toNumber()).recip()}:function(t){return new e(t).gt(Math.log10(Number.MAX_VALUE))?e.dZero:e.tetrate(10,e.pow(10,t).toNumber()).recip()}}}else{if(d=!1,s.lt(i))m=!0;else if(a.gt(i))m=!1;else{var k=t(new e(i));m=h.lt(k),r&&(m=!m)}if(m)c=function(t){return new e(t)};else{var I=e.pow(10,i);if(s.lt(I))m=!0;else if(a.gt(I))m=!1;else{var x=t(new e(I));m=h.lt(x),r&&(m=!m)}if(m)c=function(t){return e.pow(10,t)};else{var M=e.tetrate(10,i);if(s.lt(M))m=!0;else if(a.gt(M))m=!1;else{var S=t(new e(M));m=h.lt(S),r&&(m=!m)}c=m?function(t){return e.tetrate(10,new e(t).toNumber())}:function(t){return new e(t).gt(Math.log10(Number.MAX_VALUE))?e.dInf:e.tetrate(10,e.pow(10,t).toNumber())}}}}}else{if(d=!0,s.lt(-u))m=!1;else if(a.gt(-u))m=!0;else{var T=t(new e(-u));m=h.gt(T),r&&(m=!m)}if(m){var _=e.pow(10,i).recip().neg();if(s.lt(_))m=!0;else if(a.gt(_))m=!1;else{var q=t(new e(_));m=h.lt(q),r&&(m=!m)}if(m)c=function(t){return e.pow(10,t).recip().neg()};else{var R=e.tetrate(10,i).neg();if(s.lt(R))m=!0;else if(a.gt(R))m=!1;else{var E=t(new e(R));m=h.lt(E),r&&(m=!m)}c=m?function(t){return e.tetrate(10,new e(t).toNumber()).recip().neg()}:function(t){return new e(t).gt(Math.log10(Number.MAX_VALUE))?e.dZero:e.tetrate(10,e.pow(10,t).toNumber()).recip().neg()}}}else{if(d=!1,s.lt(-i))m=!1;else if(a.gt(-i))m=!0;else{var F=t(new e(-i));m=h.gt(F),r&&(m=!m)}if(m)c=function(t){return e.neg(t)};else{var O=e.pow(10,i).neg();if(s.lt(O))m=!1;else if(a.gt(O))m=!0;else{var V=t(new e(O));m=h.gt(V),r&&(m=!m)}if(m)c=function(t){return e.pow(10,t).neg()};else{var G=e.tetrate(10,i).neg();if(s.lt(G))m=!1;else if(a.gt(G))m=!0;else{var D=t(new e(G));m=h.gt(D),r&&(m=!m)}c=m?function(t){return e.tetrate(10,new e(t).toNumber()).neg()}:function(t){return new e(t).gt(Math.log10(Number.MAX_VALUE))?e.dNegInf:e.tetrate(10,e.pow(10,t).toNumber()).neg()}}}}}for(var P=p!=d!=r,Z=P?function(t,r){return e.gt(t,r)}:function(t,r){return e.lt(t,r)},C=.001,A=!1,z=!1,L=1,Y=e.dOne,$=0,B=!1,U=1;U<n;++U){B=!1,$=L,(Y=c(L)).gt(s)&&(Y=s,B=!0),Y.lt(a)&&(Y=a,B=!0);var X=t(Y);if(X.eq(h)&&!B)break;var W=Z(X,h);if(U>1&&z!=W&&(A=!0),z=W,A?C/=2:C*=2,W!=P&&Y.eq(s)||W==P&&Y.eq(a))return new e(e.dNaN);if(L+=C=Math.abs(C)*(W?-1:1),0===C||$==L)break}return c(L)}}}]),e}();return b.dZero=f(0,0,0),b.dOne=f(1,0,1),b.dNegOne=f(-1,0,1),b.dTwo=f(1,0,2),b.dTen=f(1,0,10),b.dNaN=f(Number.NaN,Number.NaN,Number.NaN),b.dInf=f(1,Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY),b.dNegInf=f(-1,Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY),b.dNumberMax=g(1,0,Number.MAX_VALUE),b.dNumberMin=g(1,0,Number.MIN_VALUE),b.dLayerSafeMax=g(1,Number.MAX_SAFE_INTEGER,i-1),b.dLayerSafeMin=g(1,Number.MAX_SAFE_INTEGER,-(i-1)),b.dLayerMax=g(1,Number.MAX_VALUE,i-1),b.dLayerMin=g(1,Number.MAX_VALUE,-(i-1)),b.fromStringCache=new n(1023),m=b.fromValue_noAlloc,g=b.fromComponents,f=b.fromComponents_noNormalize,b.fromMantissaExponent,b.fromMantissaExponent_noNormalize,b},"object"==typeof exports&&"undefined"!=typeof module?module.exports=e():"function"==typeof define&&define.amd?define(e):t.Decimal=e(),t.Decimal})(),{BlockType:r,ArgumentType:n,Cast:a,vm:i}=t,{runtime:s}=i,u="Yorenibreaketernity";class o{static get vpInfinity(){return new o(new e(e.dInf))}static get vnInfinity(){return new o(new e(e.dNegInf))}static get vZero(){return new o(new e(e.dZero))}static get vnZero(){return new o(-0)}static get vpOne(){return new o(new e(e.dOne))}static get vnOne(){return new o(new e(e.dNegOne))}static get vNaN(){return new o(new e(e.dNaN))}static isNaN(t){return e.isNaN(t)}static isFinite(t){return e.isFinite(t)}static skipCast=!1;constructor(t,e){e=e||this.constructor.skipCast,this.$=this.constructor.toDecimal(t,e)}toString(){return-1===this.$.sign&&0===this.$.mag&&0===this.$.layer?"-0":this.$.toString()}toBigInt(){return-1===this.$.sign&&0===this.$.mag&&0===this.$.layer?-0n:BigInt(this.$.trunc().toString())}toNumber(){const t=this.toString();if("-0"===t)return-0;const e=parseInt(t);return this.constructor.isNaN(e)?1/0:+e}static from(t,e){if(this.isNaN(t))return this.vNaN;if(!this.isFinite(t)){if(t===1/0)return this.vpInfinity;if(t===-1/0)return this.vnInfinity}return new this(t,e)}static exportScratch(t){return"boolean"==typeof t?t:this.isNaN(t)?NaN:this.skipCast?this.from(t):this.from(t).toString()}static toDecimal(t,r){if(t instanceof e)return t;if(t instanceof this)return t.$;if(!t||this.isNaN(t)&&"string"!=typeof t)return e.dZero;if(-0===t||-0n===t||"-0"===t)return(t=e.dZero).sign=-1,t;"bigint"==typeof t&&(t=String(t));try{return new e(r?t:a.toString(t))}catch{}return e.dZero}static _op1(t,r){return this.exportScratch(e[t](this.from(r).$))}static _op2(t,r,n){return this.exportScratch(e[t](this.from(r).$,this.from(n).$))}static add(t,e){return this._op2("add",t,e)}add(t){return this.constructor.add(this,t)}static subtract(t,e){return this._op2("sub",t,e)}subtract(t){return this.constructor.subtract(this,t)}static multiply(t,e){return this._op2("mul",t,e)}multiply(t){return this.constructor.multiply(this,t)}static divide(t,e){return this._op2("div",t,e)}divide(t){return this.constructor.divide(this,t)}static pow(t,e){return this._op2("pow",t,e)}pow(t){return this.constructor.pow(this,t)}static tetrate(t,e){return this._op2("tetrate",t,e)}tetrate(t){return this.constructor.tetrate(this,t)}static pentate(t,e){return this._op2("pentate",t,e)}pentate(t){return this.constructor.pentate(this,t)}static root(t,e){return this._op2("root",t,e)}root(t){return this.constructor.root(this,t)}static mod(t,e){return this._op2("mod",t,e)}mod(t){return this.constructor.mod(this,t)}static round(t){return this._op1("round",t)}round(t){return this.constructor.round(this)}static ceil(t){return this._op1("ceil",t)}ceil(){return this.constructor.ceil(this)}static floor(t){return this._op1("floor",t)}floor(){return this.constructor.floor(this)}static trunc(t){return this._op1("trunc",t)}trunc(){return this.constructor.trunc(this)}static log(t,e){return this._op2("log",t,e)}log(t){return this.constructor.log(this,t)}static slog(t,e){return this._op2("slog",t,e)}slog(t){return this.constructor.slog(this,t)}static abs(t){return this._op1("abs",t)}abs(){return this.constructor.abs(this)}static neg(t){return this._op1("neg",t)}neg(){return this.constructor.neg(this)}static ln(t){return this._op1("ln",t)}ln(){return this.constructor.ln(this)}static exp(t){return this._op1("exp",t)}exp(){return this.constructor.exp(this)}static sqrt(t){return this._op1("sqrt",t)}sqrt(){return this.constructor.sqrt(this)}static ssqrt(t){return this._op1("ssqrt",t)}ssqrt(){return this.constructor.ssqrt(this)}static gamma(t){return this._op1("gamma",t)}gamma(){return this.constructor.gamma(this)}static factorial(t){return this._op1("factorial",t)}factorial(){return this.constructor.factorial(this)}static equals(t,e){return this._op2("eq",t,e)}equals(t){return this.constructor.equals(this,t)}static lessThan(t,e){return this._op2("lt",t,e)}lessThan(t){return this.constructor.lessThan(this,t)}static lessThanOrEquals(t,e){return this._op2("lte",t,e)}lessThanOrEquals(t){return this.constructor.lessThanOrEquals(this,t)}static greaterThan(t,e){return this._op2("gt",t,e)}greaterThan(t){return this.constructor.greaterThan(this,t)}static greaterThanOrEquals(t,e){return this._op2("gte",t,e)}greaterThanOrEquals(t){return this.constructor.greaterThanOrEquals(this,t)}static min(t){let e=this.vpInfinity.$;for(let r=0;r<t.length;++r){const n=o.toDecimal(t[r]);e.lt(n)||(e=n)}return this.exportScratch(e)}min(t){return this.constructor.min([this,t])}static max(t){let e=this.vnInfinity.$;for(let r=0;r<t.length;++r){const n=o.toDecimal(t[r]);e.gt(n)||(e=n)}return this.exportScratch(e)}max(t){return this.constructor.max([this,t])}static absmin(t){const e=[this.vpInfinity.$,this.vpInfinity.$];for(let r=0;r<t.length;++r){const n=o.toDecimal(t[r]),a=n.abs();e[1].lt(a)||(e[0]=n,e[1]=a)}return this.exportScratch(e[0])}absmin(t){return this.constructor.absmin([this,t])}static absmax(t){const e=[this.vZero.$,this.vZero.$];for(let r=0;r<t.length;++r){const n=o.toDecimal(t[r]),a=n.abs();e[1].gt(a)||(e[0]=n,e[1]=a)}return this.exportScratch(e[0])}maxabs(t){return this.constructor.absmax([this,t])}static cmp(t,e){return this._op2("cmp",t,e)}cmp(t){return this.constructor.cmp(this,t)}static cmpabs(t,e){return this._op2("cmpabs",t,e)}cmpabs(t){return this.constructor.cmpabs(this,t)}static clamp(t,e,r){return this.scratchExport(this.toDecimal(e).clamp(t,r))}clamp(t,e){return this.constructor.clamp(t,this,e)}static getSign(t){return this.exportScratch(this.from(t).$.sign??0)}static getMag(t){return this.exportScratch(this.from(t).$.mag??0)}get sign(){return this.exportScratch(this.$.sign??0)}get mag(){return this.exportScratch(this.$.mag??0)}static sin(t){return this._op1("sin",t)}sin(){return this.constructor.sin(this)}static cos(t){return this._op1("cos",t)}cos(){return this.constructor.cos(this)}static tan(t){return this._op1("tan",t)}tan(){return this.constructor.tan(this)}static asin(t){return this._op1("asin",t)}asin(){return this.constructor.asin(this)}static acos(t){return this._op1("acos",t)}acos(){return this.constructor.acos(this)}static atan(t){return this._op1("atan",t)}atan(){return this.constructor.atan(this)}static sinh(t){return this._op1("sinh",t)}sinh(){return this.constructor.sinh(this)}static cosh(t){return this._op1("cosh",t)}cosh(){return this.constructor.cosh(this)}static tanh(t){return this._op1("tanh",t)}tanh(){return this.constructor.tanh(this)}static asinh(t){return this._op1("asinh",t)}asinh(){return this.constructor.asinh(this)}static acosh(t){return this._op1("acosh",t)}acosh(){return this.constructor.acosh(this)}static atanh(t){return this._op1("atanh",t)}atanh(){return this.constructor.atanh(this)}}class l{static isNaN=o.isNaN.bind(o);static get dNegZero(){return o.vnZero.$}static rad2deg(t){return o.toDecimal(t).mul(new e(180)).div(new e(Math.PI))}static deg2rad(t){return o.toDecimal(t).mul(new e(Math.PI)).div(new e(180))}static truncDigits(t,e){return e=o.toDecimal(e),o.toDecimal(t).mul(e).round().div(e)}static wrapClamp(t,r,n){r=o.toDecimal(r),n=o.toDecimal(n),t=o.toDecimal(t);const a=n.sub(r).add(e.dOne);return t.sub(t.sub(r).div(a).floor().mul(a))}static scale(t,e,r,n,a){e=o.toDecimal(e),n=o.toDecimal(n),a=o.toDecimal(a);return o.toDecimal(t).sub(e).div(o.toDecimal(r).sub(e)).mul(a.sub(n)).add(n)}static atan2(t,r){t=o.toDecimal(t),r=o.toDecimal(r);const n=new e(Math.PI),a=new e(3*Math.PI/4),i=new e(Math.PI/4),s=new e(Math.PI/2);if(r.equals(e.dNegInf)){if(t.equals(e.dInf))return a;if(t.equals(e.dNegInf))return a.neg();if(t.gte(e.dZero))return n;if(t.lte(this.dNegZero))return n.neg()}else if(r.equals(e.dInf)){if(t.equals(e.dInf))return i;if(t.equals(e.dNegInf))return i.neg()}else if(r.equals(e.dZero)){if(t.equals(e.dZero))return e.dZero;if(t.equals(this.dNegZero))return this.dNegZero}else if(r.equals(this.dNegZero)){if(t.equals(e.dZero))return n;if(t.equals(this.dNegZero))return n.neg();if(t.equals(e.dInf)||t.gte(e.dOne))return s;if(t.equals(e.dNegInf||t.lte(e.dNegOne)))return s.neg()}else if(r.lte(e.dNegOne)){if(t.equals(e.dInf))return s;if(t.equals(e.dNegInf))return s.neg();if(t.equals(e.dOne))return a;if(t.equals(e.dNegOne))return a.neg();if(t.equals(e.dZero))return n;if(t.equals(this.dNegZero))return n.neg()}const u=t.div(r).atan();if(r.lt(e.dZero)){if(t.gte(e.dZero))return n.add(u);if(t.lt(e.dZero))return n.neg().add(u)}return u}}class h extends l{static exportScratch=o.exportScratch.bind(o);static rad2deg(t){return this.exportScratch(super.rad2deg(t))}static deg2rad(t){return this.exportScratch(super.deg2rad(t))}static truncDigits(t,e){return this.exportScratch(super.truncDigits(t,e))}static truncDigitsPow10(t,r){return this.exportScratch(super.truncDigits(t,new e(e.dTen).pow(o.toDecimal(r))))}static scratch_sin(t){return this.truncDigits(super.deg2rad(t).sin(),1e10)}static scratch_cos(t){return this.truncDigits(super.deg2rad(t).cos(),1e10)}static scratch_tan(t){return(t=o.toDecimal(t).mod(new e(360))).equals(new e(-270))||t.equals(new e(90))?this.exportScratch(o.vpInfinity):t.equals(new e(270))||t.equals(new e(-90))?this.exportScratch(o.vnInfinity):this.truncDigits(super.deg2rad(t).tan(),1e10)}static scratch_asin(t){return this.rad2deg(o.toDecimal(t).asin())}static scratch_acos(t){return this.rad2deg(o.toDecimal(t).acos())}static scratch_atan(t){return this.rad2deg(o.toDecimal(t).atan())}static scratch_sinh(t){return this.rad2deg(o.toDecimal(t).sinh())}static scratch_cosh(t){return this.rad2deg(o.toDecimal(t).cosh())}static scratch_tanh(t){return this.rad2deg(o.toDecimal(t).tanh())}static scratch_asinh(t){return this.rad2deg(o.toDecimal(t).asinh())}static scratch_acosh(t){return this.rad2deg(o.toDecimal(t).acosh())}static scratch_atanh(t){return this.rad2deg(o.toDecimal(t).atanh())}static atan2(t,e){return this.exportScratch(super.atan2(t,e))}static scratch_atan2(t,e){return this.rad2deg(super.atan2(t,e))}static wrapClamp(t,e,r){return this.exportScratch(super.wrapClamp(t,e,r))}static scale(t,e,r,n,a){return this.exportScratch(super.scale(t,e,r,n,a))}static negabs(t){return this.exportScratch(o.toDecimal(t).abs().neg())}}t.extensions.register(s[`cext_${u}`]=new class{static exports={Decimal:e,BDecimal:o,BDecimalMath:h,FDecimalMath:l};getInfo(){return{id:u,name:"Breaking Eternity",blocks:[{opcode:"sign",blockType:r.REPORTER,text:t.translate("sign of [a]"),arguments:{a:{type:n.STRING,defaultValue:"1"}}},{opcode:"add",blockType:r.REPORTER,text:"[num1] + [num2]",arguments:{num1:{type:n.STRING,defaultValue:"5"},num2:{type:n.STRING,defaultValue:"2"}}},{opcode:"sub",blockType:r.REPORTER,text:"[num1] - [num2]",arguments:{num1:{type:n.STRING,defaultValue:"5"},num2:{type:n.STRING,defaultValue:"2"}}},{opcode:"mul",blockType:r.REPORTER,text:"[num1] * [num2]",arguments:{num1:{type:n.STRING,defaultValue:"5"},num2:{type:n.STRING,defaultValue:"2"}}},{opcode:"div",blockType:r.REPORTER,text:"[num1] / [num2]",arguments:{num1:{type:n.STRING,defaultValue:"5"},num2:{type:n.STRING,defaultValue:"2"}}},"---",{opcode:"pow",blockType:r.REPORTER,text:"[num1] ** [num2]",arguments:{num1:{type:n.STRING,defaultValue:"10"},num2:{type:n.STRING,defaultValue:"4"}}},{opcode:"tet",blockType:r.REPORTER,text:t.translate("[num1] tetrate [num2]"),arguments:{num1:{type:n.STRING,defaultValue:"10"},num2:{type:n.STRING,defaultValue:"4"}}},{opcode:"pent",blockType:r.REPORTER,text:t.translate("[num1] pentate [num2]"),arguments:{num1:{type:n.STRING,defaultValue:"10"},num2:{type:n.STRING,defaultValue:"4"}}},"---",{opcode:"root",blockType:r.REPORTER,text:t.translate("[root]root [num]"),arguments:{root:{type:n.STRING,defaultValue:"2"},num:{type:n.STRING,defaultValue:"4"}}},"---",{opcode:"eq",blockType:r.BOOLEAN,text:"[num1] = [num2]",arguments:{num1:{type:n.STRING,defaultValue:"25"},num2:{type:n.STRING,defaultValue:"50"}}},{opcode:"lt",blockType:r.BOOLEAN,text:"[num1] < [num2]",arguments:{num1:{type:n.STRING,defaultValue:"25"},num2:{type:n.STRING,defaultValue:"50"}}},{opcode:"gt",blockType:r.BOOLEAN,text:"[num1] > [num2]",arguments:{num1:{type:n.STRING,defaultValue:"25"},num2:{type:n.STRING,defaultValue:"50"}}},{opcode:"lte",blockType:r.BOOLEAN,text:"[num1] <= [num2]",arguments:{num1:{type:n.STRING,defaultValue:"25"},num2:{type:n.STRING,defaultValue:"50"}}},{opcode:"gte",blockType:r.BOOLEAN,text:"[num1] >= [num2]",arguments:{num1:{type:n.STRING,defaultValue:"25"},num2:{type:n.STRING,defaultValue:"50"}}},"---",{opcode:"log2",func:"log",blockType:r.REPORTER,text:t.translate("[base] [function] of [num]"),arguments:{base:{type:n.STRING,defaultValue:"10"},num:{type:n.STRING,defaultValue:"12"},function:{type:n.STRING,menu:"logFunctions"}}},{opcode:"round2",func:"round",blockType:r.REPORTER,text:t.translate("[round] of [num]"),arguments:{num:{type:n.STRING,defaultValue:"1.75"},round:{type:n.STRING,menu:"roundFunctions"}}},{opcode:"maths2",func:"maths",blockType:r.REPORTER,text:t.translate("[function] of [num]"),arguments:{num:{type:n.STRING,defaultValue:"1"},function:{type:n.STRING,menu:"mathFunctions"}}},{opcode:"trunc2",blockType:r.REPORTER,text:t.translate("trunc [n] to [d] decimal(s)"),arguments:{n:{type:n.STRING,defaultValue:"3.14"},d:{type:n.STRING,defaultValue:"1"}}},"---",{opcode:"degatan2",blockType:r.REPORTER,text:t.translate("deg atan2 y [y] x [x]"),arguments:{y:{type:n.STRING,defaultValue:"2"},x:{type:n.STRING,defaultValue:"5"}}},{opcode:"radatan2",blockType:r.REPORTER,text:t.translate("rad atan2 y [y] x [x]"),arguments:{y:{type:n.STRING,defaultValue:"2"},x:{type:n.STRING,defaultValue:"5"}}},{opcode:"trig1",blockType:r.REPORTER,text:t.translate("deg [fn] of [a]"),arguments:{a:{type:n.STRING,defaultValue:"3"},fn:{type:n.STRING,menu:"trigFunctions"}}},{opcode:"trig2",blockType:r.REPORTER,text:t.translate("rad [fn] of [a]"),arguments:{a:{type:n.STRING,defaultValue:"3"},fn:{type:n.STRING,menu:"trigFunctions"}}},"---",{opcode:"minmax1",blockType:r.REPORTER,text:t.translate("[a] [minmax] [b]"),arguments:{a:{type:n.STRING,defaultValue:"5"},b:{type:n.STRING,defaultValue:"9"},minmax:{type:n.STRING,menu:"minMax"}}},{opcode:"minmax2",blockType:r.REPORTER,text:t.translate("[minmax] of [a]"),arguments:{a:{type:n.STRING,defaultValue:"[1,2]"},minmax:{type:n.STRING,menu:"minMax"}}},{opcode:"clamp",blockType:r.REPORTER,text:t.translate("clamp [n] between [min] and [max]"),arguments:{min:{type:n.STRING,defaultValue:"1"},max:{type:n.STRING,defaultValue:"5"},n:{type:n.STRING,defaultValue:"8"}}},{opcode:"wrapClamp",blockType:r.REPORTER,text:t.translate("wrap clamp [n] between [min] and [max]"),arguments:{min:{type:n.STRING,defaultValue:"1"},max:{type:n.STRING,defaultValue:"360"},n:{type:n.STRING,defaultValue:"15"}}},{opcode:"scale",blockType:r.REPORTER,text:t.translate("map [n] from [a] - [b] to [x] - [y]"),arguments:{a:{type:n.STRING,defaultValue:"0"},b:{type:n.STRING,defaultValue:"5"},x:{type:n.STRING,defaultValue:"0"},y:{type:n.STRING,defaultValue:"10"},n:{type:n.STRING,defaultValue:"2.5"}}},"---",{opcode:"cmp",blockType:r.REPORTER,text:t.translate("[a] [cmp] [b]"),arguments:{a:{type:n.STRING,defaultValue:"5"},b:{type:n.STRING,defaultValue:"-4"},cmp:{type:n.STRING,menu:"cmp"}}},{opcode:"isNaN",blockType:r.BOOLEAN,text:t.translate("is [a] NaN?"),arguments:{a:{type:n.STRING,defaultValue:"hi"}}},{opcode:"isFinite",blockType:r.BOOLEAN,text:t.translate("is [a] Finite?"),arguments:{a:{type:n.STRING,defaultValue:"1.0"}}},{hideFromPalette:!0,opcode:"log",blockType:r.REPORTER,text:"[base] [function] of [num]",arguments:{base:{type:n.NUMBER,defaultValue:10},num:{type:n.STRING},function:{type:n.STRING,menu:"LOG"}}},{hideFromPalette:!0,opcode:"round",blockType:r.REPORTER,text:"[round] of [num] ",arguments:{num:{type:n.STRING},round:{type:n.STRING,menu:"ROUND"}}},{hideFromPalette:!0,opcode:"maths",blockType:r.REPORTER,text:"[function] of [num]",arguments:{num:{type:n.STRING},function:{type:n.STRING,menu:"MATHS_FUNCTIONS"}}}],menus:{ROUND:{acceptReporters:!1,items:["round","floor","ceil","trunc"]},MATHS_FUNCTIONS:{acceptReporters:!1,items:["abs","neg","ln","e^","sqrt","ssqrt","gamma","factorial"]},LOG:{acceptReporters:!1,items:["log","slog"]},roundFunctions:{acceptReporters:!0,items:[{text:t.translate("(1) round"),value:"round"},{text:t.translate("(2) floor"),value:"floor"},{text:t.translate("(3) ceil"),value:"ceil"},{text:t.translate("(4) trunc"),value:"trunc"}]},mathFunctions:{acceptReporters:!0,items:[{text:t.translate("(1) abs"),value:"abs"},{text:t.translate("(2) neg"),value:"neg"},{text:t.translate("(3) ln"),value:"ln"},{text:t.translate("(4) e^"),value:"e^"},{text:t.translate("(5) sqrt"),value:"sqrt"},{text:t.translate("(6) ssqrt"),value:"ssqrt"},{text:t.translate("(7) gamma"),value:"gamma"},{text:t.translate("(8) factorial"),value:"factorial"},{text:t.translate("(9) neg-abs"),value:"neg-abs"}]},logFunctions:{acceptReporters:!0,items:[{text:t.translate("(1) log"),value:"log"},{text:t.translate("(2) slog"),value:"slog"}]},trigFunctions:{acceptReporters:!0,items:[{text:t.translate("(1) sin"),value:"sin"},{text:t.translate("(2) cos"),value:"cos"},{text:t.translate("(3) tan"),value:"tan"},{text:t.translate("(4) asin"),value:"asin"},{text:t.translate("(5) acos"),value:"acos"},{text:t.translate("(6) atan"),value:"atan"},{text:t.translate("(7) sinh"),value:"sinh"},{text:t.translate("(8) cosh"),value:"cosh"},{text:t.translate("(9) tanh"),value:"tanh"},{text:t.translate("(10) asinh"),value:"asinh"},{text:t.translate("(11) acosh"),value:"acosh"},{text:t.translate("(12) atanh"),value:"atanh"}]},minMax:{acceptReporters:!0,items:[{text:t.translate("(1) min"),value:"min"},{text:t.translate("(2) max"),value:"max"},{text:t.translate("(3) abs-min"),value:"abs-min"},{text:t.translate("(4) abs-max"),value:"abs-max"}]},cmp:{acceptReporters:!0,items:[{text:t.translate("(1) cmp"),value:"cmp"},{text:t.translate("(2) abs-cmp"),value:"abs-cmp"}]}}}}_asValue(t,e){/**!@see https://surv-is-a-dev.github.io/static/0001tt.txt*/
if("number"==typeof t)return(+t%(1+e||1)||1).toString();if("("!==(t=a.toString(t).toLowerCase())[0])return t;const r=t.match(/^\([0-9]+\) ?/);if(r&&r[0]){const t=parseInt(r[0].trim().slice(1,-1));return e?(t%(1+e||1)||1).toString():t.toString()}return t}add({num1:t,num2:e}){return o.add(t,e)}sub({num1:t,num2:e}){return o.subtract(t,e)}div({num1:t,num2:e}){return o.divide(t,e)}mul({num1:t,num2:e}){return o.multiply(t,e)}pow({num1:t,num2:e}){return o.pow(t,e)}tet({num1:t,num2:e}){return o.tetrate(t,e)}pent({num1:t,num2:e}){return o.pentate(t,e)}root({root:t,num:e}){return o.root(t,e)}gt({num1:t,num2:e}){return o.greaterThan(t,e)}gte({num1:t,num2:e}){return o.greaterThanOrEquals(t,e)}lt({num1:t,num2:e}){return o.lessThan(t,e)}lte({num1:t,num2:e}){return o.lessThanOrEquals(t,e)}eq({num1:t,num2:e}){return o.equals(t,e)}clamp({min:t,n:e,max:r}){return o.clamp(t,e,r)}wrapClamp({n:t,min:e,max:r}){return h.wrapClamp(t,e,r)}scale({n:t,a:e,b:r,x:n,y:a}){return h.scale(t,e,r,n,a)}isNaN({a:t}){return o.isNaN(t)}isFinite({a:t}){return o.isFinite(t)}sign({a:t}){return o.getSign(t)}radatan2({y:t,x:e}){return h.atan2(t,e)}degatan2({y:t,x:e}){return h.scratch_atan2(t,e)}trunc2({n:t,d:e}){return h.truncDigitsPow10(t,e)}round({round:t,num:e}){switch(this._asValue(t,4)){case"1":case"round":return o.round(e);case"2":case"floor":return o.floor(e);case"3":case"ceil":return o.ceil(e);case"4":case"trunc":return o.trunc(e);default:return o.exportScratch(o.vZero)}}maths({function:t,num:e}){switch(this._asValue(t,8)){case"1":case"abs":return o.abs(e);case"2":case"neg":return o.neg(e);case"3":case"ln":return o.ln(e);case"4":case"e^":case"exp":return o.exp(e);case"5":case"sqrt":return o.sqrt(e);case"6":case"ssqrt":return o.ssqrt(e);case"7":case"gamma":return o.gamma(e);case"8":case"factorial":return o.factorial(e);case"9":case"neg-abs":return h.negabs(e);default:return o.exportScratch(o.vZero)}}log({function:t,base:e,num:r}){switch(this._asValue(t,2)){case"1":case"log":return o.log(e,r);case"2":case"slog":return o.slog(e,r);default:return o.exportScratch(o.vZero)}}minmax1({minmax:t,a:e,b:r}){switch(this._asValue(t,4)){case"1":case"min":return o.min([e,r]);case"2":case"max":return o.max([e,r]);case"3":case"abs-min":return o.absmin([e,r]);case"4":case"abs-max":return o.absmax([e,r]);default:return o.exportScratch(o.vZero)}}minmax2({minmax:t,a:e}){if(!Array.isArray(e))try{if(e=JSON.parse(e),!Array.isArray(e))return o.exportScratch(o.vZero)}catch{return o.exportScratch(o.vZero)}switch(e=e.map((t=>a.toString(t??NaN))),this._asValue(t,4)){case"1":case"min":return o.min(e);case"2":case"max":return o.max(e);case"3":case"abs-min":return o.absmin(e);case"4":case"abs-max":return o.absmax(e);default:return o.exportScratch(o.vZero)}}cmp({cmp:t,a:e,b:r}){switch(this._asValue(t,2)){case"1":case"cmp":return o.cmp(e,r);case"2":case"abs-cmp":return o.cmpabs(e,r);default:return o.exportScratch(o.vZero)}}trig1({fn:t,a:e,real:r}){switch(r=r||!1,this._asValue(t)){case"1":case"sin":return r?o.sin(e):h.scratch_sin(e);case"2":case"cos":return r?o.cos(e):h.scratch_cos(e);case"3":case"tan":return r?o.tan(e):h.scratch_tan(e);case"4":case"asin":return r?o.asin(e):h.scratch_asin(e);case"5":case"acos":return r?o.acos(e):h.scratch_acos(e);case"6":case"atan":return r?o.atan(e):h.scratch_atan(e);case"7":case"sinh":return r?o.sinh(e):h.scratch_sinh(e);case"8":case"cosh":return r?o.cosh(e):h.scratch_cosh(e);case"9":case"tanh":return r?o.tanh(e):h.scratch_tanh(e);case"10":case"asinh":return r?o.asinh(e):h.scratch_asinh(e);case"11":case"acosh":return r?o.acosh(e):h.scratch_acosh(e);case"12":case"atanh":return r?o.atanh(e):h.scratch_atanh(e)}}trig2({fn:t,a:e}){return this.trig1({fn:t,a:e,real:!0})}})}(Scratch);