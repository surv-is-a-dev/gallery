<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf8">
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>Survs Gallery</title>
    <meta name="theme-color" content="#ff4c4c">
    <meta name="description" content="Surv's extension gallery :D">
    <meta content="https://surv.is-a.dev/gallery/" property="og:url" />
  </head>
  <body>
    <!-- To the guy whos snooping. -->
    <!-- This site is generated via JS -->
    <!-- So its not just there on load -->
    <!-- Please be careful -->
    
    <!-- For this pages extensions, -->
    <!-- just look at extensions/index.json -->
    <!-- it has ALL the extensions for this page! -->
    <script>
      // It does not have to be async
      async function GeneratorLoaded(generator) {
        const footerLinks = [];
        const funnyMode = window.location.href.includes('?funny-is-allowed');
        if (funnyMode) {
          generator._site.gallery_title += ' (Funny mode)';
          footerLinks.push(['GoofyWarp gallery', 'https://goofywarp.github.io/gallery/']);
        }
        document.head.querySelector('title').textContent = generator._site.gallery_title;
        generator.addFooterLinks(...footerLinks);
        generator.setUsage('gallery');
        generator.addSearchTags('experimental', 'advanced');
        await generator.import(generator.asset('include/JSON5.min.js'));
        let req, extensions;
        req = await fetch(generator.asset('extensions/index.json5'));
        if (!req.ok) {
          alert('Failed to load gallery :(');
          return false;
        }
        extensions = JSON5.parse(await req.text());
        if (!extensions) {
          alert('Failed to load gallery :(');
          return false;
        }
        let i = 0;
        for (const extension of extensions) {
          extensions[i] = generator.addExtension(extension);
          i++;
        }
        if (window.location.href.includes('?hl')) {
          const _placeholder = extensions[0];
          _placeholder.querySelector('div.extension-buttons').appendChild((() => {
            const div = document.createElement('div');
            div.style = 'position: absolute; left: 0px; bottom: 0px; border: none; background: none;';
            div.id = 'hlMusic';
            div.innerHTML = `
              <img src="${generator.asset('@external/radio.webp')}" width="32" height="64" loading="lazy" draggable="false" />
              <audio src="${generator.asset('@external/radio.ogg')}" disablecontrols="false" loop="" style="display: none;" />
            `;
            div.audio = div.querySelector('audio');
            div.onclick = function() {
              if (this.yes) return;
              this.yes = true;
              this.audio.play();
              this.audio.disabled = true;
              delete this.onclick;
            };
            return div;
          })());
        }
        if (funnyMode) {
          alert('Funny mode activated, PLEASE do not report any bugs while using this mode!');
          generator.addSearchTags('funny');
          req = await fetch(generator.asset('extensions/funny-is-allowed.json5'));
          if (!req.ok) {
            alert('Failed to load gallery :(');
            return false;
          }
          extensions = JSON5.parse(await req.text());
          if (!extensions) {
            alert('Failed to load extra gallery :(');
            return false;
          }
          for (const extension of extensions) {
            generator.addExtension(extension);
          }
        }
        (() => {
          let addedBaq = false
          function goBaq(currentSearch) {
            if (window.location.href.includes('?baq') || currentSearch === 'back to the future') {
              if (addedBaq) return;
              addedBaq = true;
              generator.addSearchTags('baq');
              generator.addExtension({
                img: 'baq23future/normal.webp', id: 'baq23future/normal',
                name: 'Completely normal behaviour',
                description: 'A completely normal extension. NOT STRANGE AT ALL :P',
                search_tags: ['experimental', 'baq'], requirements: [],
                new: true, updated: false,
                iCard: {
                  url: generator.asset('?baq'),
                  description: 'Completely normal...',
                },
                credits: [{
                  name: 'baqirbeard',
                  url: 'https://github.com/baqirbeard/',
                }, {
                  name: '0znzw',
                  url: 'https://scratch.mit.edu/users/0znzw/',
                }],
                // SPECIAL meta tags for THIS SPECIFIC extension DO NOT ask for your own.
                meta: ['baq 2 3 future', 'back to the future'],
              });
            } else if (currentSearch === 'baq 2 3 future') {
              window.location.href += '#?baq';
              window.location.reload(true);
            }
          };
          if (window.location.href.includes('?baq')) goBaq('back to the future');
          generator.onSearchInput = (currentSearch) => {
            if (currentSearch === 'baq 2 3 future' || currentSearch === 'back to the future') {
              goBaq(currentSearch);
            }
          };
        })();
      }
    </script>
    <!-- The base64 is just to use the altgen and isaltgen tags -->
    <script src="/include/generator.js" data-altgen="/gallery/include/generator.js" data-isaltgen="1" onerror="eval(atob('ICAgICgoKT0+e2NvbnN0IHRvcExldmVsID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnc2NyaXB0Jyk7CiAgICB0b3BMZXZlbC5vbmVycm9yID0gKCkgPT4gYWxlcnQoJ1RoaXMgc2l0ZSBpcyBub3QgY29uZmlndXJlZCBjb3JyZWN0bHknKTsKICAgIHRvcExldmVsLnNyYyA9IChkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCdzY3JpcHRbZGF0YS1pc2FsdGdlbj0iMSJdJykuZGF0YXNldC5hbHRnZW4pOwogICAgZG9jdW1lbnQuYm9keS5hcHBlbmRDaGlsZCh0b3BMZXZlbCk7fSkoKTs='))"></script>
  </body>
</html>
